---
title: Azure의 Linux Virtual Machines용 SAP S/4HANA
description: Azure의 Linux 환경에서 고가용성을 통해 SAP S/4HANA를 실행하는 검증된 사례입니다.
author: lbrader
ms.date: 05/11/2018
ms.openlocfilehash: 9635de73ec431e0ac678e4008e0c4835796d47ad
ms.sourcegitcommit: 86d86d71e392550fd65c4f76320d7ecf0b72e1f6
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/06/2018
ms.locfileid: "37864507"
---
# <a name="sap-s4hana-for-linux-virtual-machines-on-azure"></a><span data-ttu-id="de324-103">Azure의 Linux Virtual Machines용 SAP S/4HANA</span><span class="sxs-lookup"><span data-stu-id="de324-103">SAP S/4HANA for Linux Virtual Machines on Azure</span></span>

<span data-ttu-id="de324-104">이 참조 아키텍처는 Azure에서 재해 복구를 지원하는 고가용성 환경에서 S/4HANA를 실행하는 일단의 검증된 사례를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="de324-104">This reference architecture shows a set of proven practices for running S/4HANA in a high availability environment that supports disaster recovery on Azure.</span></span> <span data-ttu-id="de324-105">이 아키텍처는 조직의 요구 사항에 맞게 변경할 수 있는 특정 VM(가상 머신) 크기로 배포됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-105">This architecture is deployed with specific virtual machine (VM) sizes that can be changed to accommodate your organization's needs.</span></span> 

![](./images/sap-s4hana.png)

<span data-ttu-id="de324-106">*이 아키텍처의 [Visio 파일][visio-download]을 다운로드합니다.*</span><span class="sxs-lookup"><span data-stu-id="de324-106">*Download a [Visio file][visio-download] of this architecture.*</span></span>

> [!NOTE] 
> <span data-ttu-id="de324-107">이 참조 아키텍처를 배포하려면 적절한 SAP 제품 라이선스 및 기타 Microsoft 이외의 기술이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-107">Deploying this reference architecture requires appropriate licensing of SAP products and other non-Microsoft technologies.</span></span>

## <a name="architecture"></a><span data-ttu-id="de324-108">아키텍처</span><span class="sxs-lookup"><span data-stu-id="de324-108">Architecture</span></span>
 
<span data-ttu-id="de324-109">이 참조 아키텍처는 엔터프라이즈급 프로덕션 수준 시스템에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-109">This reference architecture describes a enterprise-grade, production-level system.</span></span> <span data-ttu-id="de324-110">이 구성은 비즈니스 요구 사항에 맞게 단일 가상 머신으로 줄일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-110">To suit your business needs, this configuration can be reduced to a single virtual machine.</span></span> <span data-ttu-id="de324-111">하지만 필요한 구성 요소는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-111">However, the following components are required:</span></span>

<span data-ttu-id="de324-112">**가상 네트워크**.</span><span class="sxs-lookup"><span data-stu-id="de324-112">**Virtual network**.</span></span> <span data-ttu-id="de324-113">[Azure Virtual Network](/azure/virtual-network/virtual-networks-overview) 서비스는 Azure 리소스를 서로 안전하게 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-113">The [Azure Virtual Network](/azure/virtual-network/virtual-networks-overview) service securely connects Azure resources to each other.</span></span> <span data-ttu-id="de324-114">이 아키텍처에서 가상 네트워크는 [hub-spoke 토폴로지](../hybrid-networking/hub-spoke.md)의 허브에 배포된 게이트웨이를 통해 온-프레미스 환경에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-114">In this architecture, the virtual network connects to an on-premises environment through a gateway deployed in the hub of a [hub-spoke topology](../hybrid-networking/hub-spoke.md).</span></span> <span data-ttu-id="de324-115">스포크는 SAP 응용 프로그램 사용되는 가상 네트워크입니다.</span><span class="sxs-lookup"><span data-stu-id="de324-115">The spoke is the virtual network used for the SAP applications.</span></span>

<span data-ttu-id="de324-116">**서브넷**.</span><span class="sxs-lookup"><span data-stu-id="de324-116">**Subnets**.</span></span> <span data-ttu-id="de324-117">가상 네트워크는 게이트웨이, 응용 프로그램, 데이터베이스 및 공유 서비스와 같은 각 계층에 대한 별도의 [서브넷](/azure/virtual-network/virtual-network-manage-subnet)으로 세분화됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-117">The virtual network is subdivided into separate [subnets](/azure/virtual-network/virtual-network-manage-subnet) for each tier: gateway, application, database, and shared services .</span></span> 

<span data-ttu-id="de324-118">**가상 머신**.</span><span class="sxs-lookup"><span data-stu-id="de324-118">**Virtual machines**.</span></span> <span data-ttu-id="de324-119">이 아키텍처는 응용 프로그램 계층과 데이터베이스 계층에 대해 다음과 같이 그룹화되어 Linux를 실행하는 가상 머신을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-119">This architecture uses virtual machines running Linux for the application tier and database tier, grouped as follows:</span></span>

- <span data-ttu-id="de324-120">**응용 프로그램 계층**.</span><span class="sxs-lookup"><span data-stu-id="de324-120">**Application tier**.</span></span> <span data-ttu-id="de324-121">Fiori 프런트 엔드 서버 풀, SAP Web Dispatcher 풀, 응용 프로그램 서버 풀 및 SAP Central Services 클러스터가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-121">Includes the Fiori Front-end Server pool, SAP Web Dispatcher pool, application server pool, and SAP Central Services cluster.</span></span> <span data-ttu-id="de324-122">Azure Linux 가상 머신에 있는 Central Services의 고가용성을 위해 고가용성 NFS(네트워크 파일 시스템) 서비스가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-122">For high availability of Central Services on Azure Linux virtual machines, a highly available Network File System (NFS) service is required.</span></span>
- <span data-ttu-id="de324-123">**NFS 클러스터**.</span><span class="sxs-lookup"><span data-stu-id="de324-123">**NFS cluster**.</span></span> <span data-ttu-id="de324-124">이 아키텍처는 Linux 클러스터에서 실행되는 [NFS](/azure/virtual-machines/workloads/sap/high-availability-guide-suse-nfs) 서버를 사용하여 SAP 시스템 간에 공유되는 데이터를 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-124">This architecture uses an [NFS](/azure/virtual-machines/workloads/sap/high-availability-guide-suse-nfs) server running on a Linux cluster to store data shared between SAP systems.</span></span> <span data-ttu-id="de324-125">이 중앙 집중식 클러스터는 여러 SAP 시스템에서 공유할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-125">This centralized cluster can be shared across multiple SAP systems.</span></span> <span data-ttu-id="de324-126">NFS 서비스의 고가용성을 위해 선택한 Linux 배포판에 적절한 고가용성 확장이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-126">For high availability of the NFS service, the appropriate High Availability Extension for the selected Linux distribution is used.</span></span>
- <span data-ttu-id="de324-127">**SAP HANA**.</span><span class="sxs-lookup"><span data-stu-id="de324-127">**SAP HANA**.</span></span> <span data-ttu-id="de324-128">데이터베이스 계층은 클러스터에서 둘 이상의 Linux 가상 머신을 사용하여 고가용성을 달성합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-128">The database tier uses two or more Linux virtual machines in a cluster to achieve high availability.</span></span> <span data-ttu-id="de324-129">HSR(HANA 시스템 복제)을 사용하여 주 및 보조 HANA 시스템 간에 콘텐츠를 복제합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-129">HANA System Replication (HSR) is used to replicate contents between primary and secondary HANA systems.</span></span> <span data-ttu-id="de324-130">Linux 클러스터링을 사용하여 시스템 장애를 감지하고 자동 장애 조치를 용이하게 합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-130">Linux clustering is used to detect system failures and facilitate automatic failover.</span></span> <span data-ttu-id="de324-131">저장소 기반 또는 클라우드 기반 펜싱 메커니즘을 사용하여 장애가 발생한 시스템이 클러스터 브레인 분할 상황을 방지하기 위해 격리되거나 종료되도록 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-131">A storage-based or cloud-based fencing mechanism can be used to ensure the failed system is isolated or shut down to avoid the cluster split-brain condition.</span></span>
- <span data-ttu-id="de324-132">**Jumpbox**.</span><span class="sxs-lookup"><span data-stu-id="de324-132">**Jumpbox**.</span></span> <span data-ttu-id="de324-133">요새 호스트라고도 합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-133">Also called a bastion host.</span></span> <span data-ttu-id="de324-134">이는 관리자가 다른 가상 머신에 연결하는 데 사용하는 네트워크의 보안 가상 머신입니다.</span><span class="sxs-lookup"><span data-stu-id="de324-134">This is a secure virtual machine on the network that administrators use to connect to the other virtual machines.</span></span> <span data-ttu-id="de324-135">Windows 또는 Linux를 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-135">It can run Windows or Linux.</span></span> <span data-ttu-id="de324-136">HANA Cockpit 또는 HANA Studio 관리 도구를 사용할 때 웹을 편리하게 탐색하기 위해 Windows jumpbox를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-136">Use a Windows jumpbox for web browsing convenience when using HANA Cockpit or HANA Studio management tools.</span></span>

<span data-ttu-id="de324-137">**부하 분산 장치**.</span><span class="sxs-lookup"><span data-stu-id="de324-137">**Load balancers**.</span></span> <span data-ttu-id="de324-138">기본 제공 SAP 부하 분산 장치와 [Azure Load Balancer](/azure/load-balancer/load-balancer-overview)를 모두 사용하여 HA를 달성합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-138">Both built-in SAP load balancers and [Azure Load Balancer](/azure/load-balancer/load-balancer-overview) are used to achieve HA.</span></span> <span data-ttu-id="de324-139">Azure Load Balancer 인스턴스를 사용하여 응용 프로그램 계층 서브넷의 가상 머신에 트래픽을 분산합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-139">Azure Load Balancer instances are used to distribute traffic to virtual machines in the application tier subnet.</span></span>

<span data-ttu-id="de324-140">**가용성 집합**.</span><span class="sxs-lookup"><span data-stu-id="de324-140">**Availability sets**.</span></span> <span data-ttu-id="de324-141">모든 풀 및 클러스터(Web Dispatcher, SAP 응용 프로그램 서버, Central Services, NFS 및 HANA)용 가상 머신은 별도의 [가용성 집합](/azure/virtual-machines/windows/tutorial-availability-sets)으로 그룹화되고, 역할당 둘 이상의 가상 머신이 프로비전됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-141">Virtual machines for all pools and clusters (Web Dispatcher, SAP application servers, Central Services, NFS, and HANA) are grouped into separate [availability sets](/azure/virtual-machines/windows/tutorial-availability-sets), and at least two virtual machines are provisioned per role.</span></span> <span data-ttu-id="de324-142">이렇게 하면 가상 머신에 더 높은 [SLA(서비스 수준 계약)](https://azure.microsoft.com/support/legal/sla/virtual-machines)를 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-142">This makes the virtual machines eligible for a higher [service level agreement](https://azure.microsoft.com/support/legal/sla/virtual-machines) (SLA).</span></span> 

<span data-ttu-id="de324-143">**NIC**.</span><span class="sxs-lookup"><span data-stu-id="de324-143">**NICs**.</span></span> <span data-ttu-id="de324-144">[NIC(네트워크 인터페이스 카드)](/azure/virtual-network/virtual-network-network-interface)를 사용하면 가상 네트워크의 모든 가상 머신에서 통신할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-144">[Network interface cards](/azure/virtual-network/virtual-network-network-interface) (NICs) enable all communication of virtual machines on a virtual network.</span></span>

<span data-ttu-id="de324-145">**네트워크 보안 그룹**.</span><span class="sxs-lookup"><span data-stu-id="de324-145">**Network security groups**.</span></span> <span data-ttu-id="de324-146">[NSG(네트워크 보안 그룹)](/azure/virtual-network/virtual-networks-nsg)는 가상 네트워크에서 들어오는 트래픽, 나가는 트래픽 및 서브넷 간 트래픽을 제한하기 위해 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-146">To restrict incoming, outgoing, and intra-subnet traffic in the virtual network, [network security groups](/azure/virtual-network/virtual-networks-nsg) (NSGs) are used.</span></span>

<span data-ttu-id="de324-147">**게이트웨이**.</span><span class="sxs-lookup"><span data-stu-id="de324-147">**Gateway**.</span></span> <span data-ttu-id="de324-148">게이트웨이는 온-프레미스 네트워크를 Azure 가상 네트워크로 확장합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-148">A gateway extends your on-premises network to the Azure virtual network.</span></span> <span data-ttu-id="de324-149">[ExpressRoute](/azure/architecture/reference-architectures/hybrid-networking/expressroute)는 공용 인터넷을 통해 통신하지 않는 사설 연결을 만드는 데 권장되는 Azure 서비스이지만 [사이트 간 연결](/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal)도 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-149">[ExpressRoute](/azure/architecture/reference-architectures/hybrid-networking/expressroute) is the recommended Azure service for creating private connections that do not go over the public Internet, but a [Site-to-Site](/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal) connection can also be used.</span></span> 

<span data-ttu-id="de324-150">**Azure Storage**.</span><span class="sxs-lookup"><span data-stu-id="de324-150">**Azure Storage**.</span></span> <span data-ttu-id="de324-151">[Azure Storage](/azure/storage/)는 가상 머신의 VHD(가상 하드 디스크)용 영구 저장소를 제공하기 위해 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-151">To provide persistent storage of a virtual machine's virtual hard disk (VHD), [Azure Storage](/azure/storage/) is required.</span></span> 

## <a name="recommendations"></a><span data-ttu-id="de324-152">권장 사항</span><span class="sxs-lookup"><span data-stu-id="de324-152">Recommendations</span></span>

<span data-ttu-id="de324-153">이 아키텍처는 소규모 프로덕션 수준의 엔터프라이즈 배포를 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-153">This architecture describes a small production-level enterprise deployment.</span></span> <span data-ttu-id="de324-154">배포는 비즈니스 요구 사항에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="de324-154">Your deployment will differ based on your business requirements.</span></span> <span data-ttu-id="de324-155">여기서 추천하는 권장 사항을 단지 시작점으로 활용하세요.</span><span class="sxs-lookup"><span data-stu-id="de324-155">Use these recommendations as a starting point.</span></span>

### <a name="virtual-machines"></a><span data-ttu-id="de324-156">가상 머신</span><span class="sxs-lookup"><span data-stu-id="de324-156">Virtual machines</span></span>

<span data-ttu-id="de324-157">응용 프로그램 서버 풀 및 클러스터에서 요구 사항에 따라 가상 머신 수를 조정합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-157">In application server pools and clusters, adjust the number of virtual machines based on your requirements.</span></span> <span data-ttu-id="de324-158">[Azure Virtual Machines 계획 및 구현 가이드](/azure/virtual-machines/workloads/sap/planning-guide)에는 가상 머신에서 SAP NetWeaver를 실행하는 방법에 대한 자세한 정보가 나와 있으며, 이 정보는 SAP S/4HANA에도 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-158">The [Azure Virtual Machines planning and implementation guide](/azure/virtual-machines/workloads/sap/planning-guide) includes details about running SAP NetWeaver on virtual machines, but the information applies to SAP S/4HANA as well.</span></span>

<span data-ttu-id="de324-159">Azure 가상 머신 유형 및 처리량 메트릭에 대한 SAP 지원(SAPS)을 자세히 알아보려면 [SAP 노트 1928533](https://launchpad.support.sap.com/#/notes/1928533)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="de324-159">For details about SAP support for Azure virtual machine types and throughput metrics (SAPS), see [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span></span> 

### <a name="sap-web-dispatcher-pool"></a><span data-ttu-id="de324-160">SAP Web Dispatcher 풀</span><span class="sxs-lookup"><span data-stu-id="de324-160">SAP Web Dispatcher pool</span></span>

<span data-ttu-id="de324-161">Web Dispatcher 구성 요소가 SAP 응용 프로그램 서버 간의 SAP 트래픽을 위한 부하 분산 장치로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-161">The Web Dispatcher component is used as a load balancer for SAP traffic among the SAP application servers.</span></span> <span data-ttu-id="de324-162">Web Dispatcher 구성 요소의 고가용성을 달성하기 위해 Azure Load Balancer를 사용하여 분산 장치 백 엔드 풀에서 사용할 수 있는 Web Dispatcher 간에 HTTP(S) 트래픽 분산에 대한 라운드 로빈 구성에서 병렬 Web Dispatcher 설정을 구현합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-162">To achieve high availability for the Web Dispatcher component, Azure Load Balancer is used to implement the parallel Web Dispatcher setup in a round-robin configuration for HTTP(S) traffic distribution among the available Web Dispatchers in the balancers back-end pool.</span></span> 

### <a name="fiori-front-end-server"></a><span data-ttu-id="de324-163">Fiori 프런트 엔드 서버</span><span class="sxs-lookup"><span data-stu-id="de324-163">Fiori Front-end Server</span></span>

<span data-ttu-id="de324-164">Fiori 프런트 엔드 서버는 [NetWeaver 게이트웨이](https://help.sap.com/doc/saphelp_gateway20sp12/2.0/en-US/76/08828d832e4aa78748e9f82204a864/content.htm?no_cache=true)를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-164">The Fiori Front-end Server uses a [NetWeaver Gateway](https://help.sap.com/doc/saphelp_gateway20sp12/2.0/en-US/76/08828d832e4aa78748e9f82204a864/content.htm?no_cache=true).</span></span> <span data-ttu-id="de324-165">소규모 배포의 경우 Fiori 서버에 로드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-165">For small deployments, it can be loaded on the Fiori server.</span></span> <span data-ttu-id="de324-166">대규모 배포의 경우 별도의 NetWeaver 게이트웨이용 서버를 Fiori 프런트 엔드 서버 풀 앞에 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-166">For large deployments, a separate server for the NetWeaver Gateway may be deployed in front of the Fiori Front-end Server pool.</span></span>

### <a name="application-servers-pool"></a><span data-ttu-id="de324-167">응용 프로그램 서버 풀</span><span class="sxs-lookup"><span data-stu-id="de324-167">Application servers pool</span></span>

<span data-ttu-id="de324-168">ABAP 응용 프로그램 서버에 대한 로그온 그룹을 관리하기 위해 SMLG 트랜잭션이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-168">To manage logon groups for ABAP application servers, the SMLG transaction is used.</span></span> <span data-ttu-id="de324-169">Central Services의 메시지 서버 내에서 부하 분산 기능을 사용하여 SAPGUI 및 RFC 트래픽용 SAP 응용 프로그램 서버 풀 간의 워크로드를 분산합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-169">It uses the load balancing function within the message server of the Central Services to distribute workload among SAP application servers pool for SAPGUIs and RFC traffic.</span></span> <span data-ttu-id="de324-170">고가용성 Central Services에 대한 응용 프로그램 서버는 클러스터 가상 네트워크 이름을 통해 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-170">The application server connection to the highly available Central Services is through the cluster virtual network name.</span></span> <span data-ttu-id="de324-171">이렇게 하면 로컬 장애 조치 후에 Central Services 연결에 대한 응용 프로그램 서버 프로필을 변경할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-171">This avoids the need to change the application server profile for Central Services connectivity after a local failover.</span></span> 

### <a name="sap-central-services-cluster"></a><span data-ttu-id="de324-172">SAP Central Services 클러스터</span><span class="sxs-lookup"><span data-stu-id="de324-172">SAP Central Services cluster</span></span>

<span data-ttu-id="de324-173">고가용성이 요구 사항이 아닌 경우 Central Services를 단일 가상 머신에 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-173">Central Services can be deployed to a single virtual machine when high availability is not a requirement.</span></span> <span data-ttu-id="de324-174">그러나 단일 가상 머신이 SAP 환경에 대한 단일 SPOF(단일 실패 지점)가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-174">However, the single virtual machine becomes a potential single point of failure (SPOF) for the SAP environment.</span></span> <span data-ttu-id="de324-175">고가용성 Central Services 배포의 경우 고가용성 NFS 클러스터 및 고가용성 Central Services 클러스터가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-175">For a highly available Central Services deployment, a highly available NFS cluster and a highly available Central Services cluster are used.</span></span>

### <a name="nfs-cluster"></a><span data-ttu-id="de324-176">NFS 클러스터</span><span class="sxs-lookup"><span data-stu-id="de324-176">NFS cluster</span></span>

<span data-ttu-id="de324-177">DRBD(Distributed Replicated Block Device)가 NFS 클러스터의 노드 간 복제에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-177">DRBD (Distributed Replicated Block Device) is used for replication between the nodes of the NFS cluster.</span></span>

### <a name="availability-sets"></a><span data-ttu-id="de324-178">가용성 집합</span><span class="sxs-lookup"><span data-stu-id="de324-178">Availability sets</span></span>

<span data-ttu-id="de324-179">가용성 집합은 서버를 서로 다른 물리적 인프라로 배포하고 그룹을 업데이트하여 서비스 가용성을 향상시킵니다.</span><span class="sxs-lookup"><span data-stu-id="de324-179">Availability sets distribute servers to different physical infrastructure and update groups to improve service availability.</span></span> <span data-ttu-id="de324-180">Azure 인프라 유지 관리로 인한 가동 중지 시간으로부터 보호하고 [SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines)를 충족하기 위해 동일한 역할을 수행하는 가상 머신을 가용성 집합에 배치합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-180">Put virtual machines that perform the same role into an availability sets to help guard against downtime caused by Azure infrastructure maintenance and to meet [SLAs](https://azure.microsoft.com/support/legal/sla/virtual-machines).</span></span> <span data-ttu-id="de324-181">가용성 집합당 둘 이상의 가상 머신을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-181">Two or more virtual machines per availability set is recommended.</span></span>

<span data-ttu-id="de324-182">집합의 모든 가상 머신은 동일한 역할을 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-182">All virtual machines in a set must perform the same role.</span></span> <span data-ttu-id="de324-183">동일한 가용성 집합에 역할이 다른 서버를 혼합하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="de324-183">Do not mix servers of different roles in the same availability set.</span></span> <span data-ttu-id="de324-184">예를 들어 ASCS 노드를 응용 프로그램 서버와 동일한 가용성 집합에 배치하면 안됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-184">For example, don't place a ASCS node in the same availability set with the application server.</span></span>

### <a name="nics"></a><span data-ttu-id="de324-185">NIC</span><span class="sxs-lookup"><span data-stu-id="de324-185">NICs</span></span>

<span data-ttu-id="de324-186">기존의 온-프레미스 SAP 자산에서는 비즈니스 트래픽과 관리 트래픽을 분리하기 위해 컴퓨터당 여러 개의 NIC(네트워크 인터페이스 카드)를 구현합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-186">Traditional on-premises SAP landscapes implement multiple network interface cards (NICs) per machine to segregate administrative traffic from business traffic.</span></span> <span data-ttu-id="de324-187">Azure에서 가상 네트워크는 동일한 네트워크 구조를 통해 모든 트래픽을 보내는 소프트웨어 정의 네트워크입니다.</span><span class="sxs-lookup"><span data-stu-id="de324-187">On Azure, the virtual network is a software-defined network that sends all traffic through the same network fabric.</span></span> <span data-ttu-id="de324-188">따라서 여러 개의 NIC를 사용할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-188">Therefore, the use of multiple NICs is unnecessary.</span></span> <span data-ttu-id="de324-189">그러나 조직에서 트래픽을 분리해야 하는 경우 VM당 여러 개의 NIC를 배포하고, 각 NIC를 서로 다른 서브넷에 연결한 다음, NSG를 사용하여 서로 다른 액세스 제어 정책을 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-189">However, if your organization needs to segregate traffic, you can deploy multiple NICs per VM, connect each NIC to a different subnet, and then use NSGs to enforce different access control policies.</span></span>

### <a name="subnets-and-nsgs"></a><span data-ttu-id="de324-190">서브넷 및 NSG</span><span class="sxs-lookup"><span data-stu-id="de324-190">Subnets and NSGs</span></span>

<span data-ttu-id="de324-191">이 아키텍처는 가상 네트워크 주소 공간을 서브넷으로 세분화합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-191">This architecture subdivides the virtual network address space into subnets.</span></span> <span data-ttu-id="de324-192">각 서브넷은 해당 서브넷에 대한 액세스 정책을 정의하는 NSG와 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-192">Each subnet can be associated with a NSG that defines the access policies for the subnet.</span></span> <span data-ttu-id="de324-193">응용 프로그램 서버를 별도의 서브넷에 배치하면 개별 서버가 아니라 서브넷 보안 정책을 관리하여 더 쉽게 보안을 유지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-193">Place application servers on a separate subnet so you can secure them more easily by managing the subnet security policies, not the individual servers.</span></span>

<span data-ttu-id="de324-194">NSG가 서브넷과 연결되면 서브넷 내의 모든 서버에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-194">When a NSG is associated with a subnet, it then applies to all the servers within the subnet.</span></span> <span data-ttu-id="de324-195">NSG를 사용하여 서브넷의 서버를 더 자세히 제어하는 방법에 대한 자세한 내용은 [네트워크 보안 그룹을 통한 네트워크 트래픽 필터링](https://azure.microsoft.com/blog/multiple-vm-nics-and-network-virtual-appliances-in-azure/)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="de324-195">For more information about using NSGs for fine-grained control over the servers in a subnet, see [Filter network traffic with network security groups](https://azure.microsoft.com/blog/multiple-vm-nics-and-network-virtual-appliances-in-azure/).</span></span>

<span data-ttu-id="de324-196">[VPN Gateway 계획 및 설계](/azure/vpn-gateway/vpn-gateway-plan-design)도 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="de324-196">See also [Planning and design for VPN Gateway](/azure/vpn-gateway/vpn-gateway-plan-design).</span></span>

### <a name="load-balancers"></a><span data-ttu-id="de324-197">부하 분산 장치</span><span class="sxs-lookup"><span data-stu-id="de324-197">Load balancers</span></span>

<span data-ttu-id="de324-198">[SAP Web Dispatcher](https://help.sap.com/doc/saphelp_nw73ehp1/7.31.19/en-US/48/8fe37933114e6fe10000000a421937/frameset.htm)는 SAP 응용 프로그램 서버 풀에 대한 HTTP(S) 트래픽(Fiori 스타일 응용 프로그램 포함)의 부하 분산을 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-198">[SAP Web Dispatcher](https://help.sap.com/doc/saphelp_nw73ehp1/7.31.19/en-US/48/8fe37933114e6fe10000000a421937/frameset.htm) handles load balancing of HTTP(S) traffic including Fiori style applications to a pool of SAP application servers.</span></span> 

<span data-ttu-id="de324-199">DIAG 또는 RFC(원격 함수 호출)를 통해 SAP 서버에 연결하는 SAP GUI 클라이언트의 트래픽에 대해 Central Services 메시지 서버는 SAP 응용 프로그램 서버 [로그온 그룹](https://wiki.scn.sap.com/wiki/display/SI/ABAP+Logon+Group+based+Load+Balancing)을 통해 부하를 분산하므로 추가 부하 분산 장치가 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-199">For traffic from SAP GUI clients connecting a SAP server via DIAG or Remote Function Calls (RFC), the Central Service message server balances the load through SAP application server [logon groups](https://wiki.scn.sap.com/wiki/display/SI/ABAP+Logon+Group+based+Load+Balancing), so no additional load balancer is needed.</span></span> 

### <a name="azure-storage"></a><span data-ttu-id="de324-200">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="de324-200">Azure Storage</span></span>

<span data-ttu-id="de324-201">데이터베이스 서버 가상 머신에 Azure Premium Storage를 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-201">We recommend using Azure Premium Storage for the database server virtual machines.</span></span> <span data-ttu-id="de324-202">Premium Storage는 일관된 읽기/쓰기 대기 시간을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-202">Premium storage provides consistent read/write latency.</span></span> <span data-ttu-id="de324-203">단일 인스턴스 가상 머신의 운영 체제 디스크 및 데이터 디스크에 Premium Storage를 사용하는 방법에 대한 자세한 내용은 [Virtual Machines에 대한 SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines/)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="de324-203">For details about using Premium Storage for the operating system disks and data disks of a single-instance virtual machine, see [SLA for Virtual Machines](https://azure.microsoft.com/support/legal/sla/virtual-machines/).</span></span> 

<span data-ttu-id="de324-204">모든 프로덕션 SAP 시스템의 경우 [Azure Managed Disks](/azure/storage/storage-managed-disks-overview) 프리미엄을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-204">For all production SAP systems, we recommend using Premium [Azure Managed Disks](/azure/storage/storage-managed-disks-overview).</span></span> <span data-ttu-id="de324-205">Managed Disks를 사용하여 디스크의 VHD 파일을 관리하므로 안정성이 향상됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-205">Managed Disks are used to manage the VHD files for the disks, adding reliability.</span></span> <span data-ttu-id="de324-206">또한 Managed Disks는 가용성 집합 내의 가상 머신용 디스크를 격리하여 단일 실패 지점을 방지합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-206">They also ensure that the disks for virtual machines within an availability set are isolated to avoid single points of failure.</span></span>

<span data-ttu-id="de324-207">Central Services 가상 머신을 포함한 SAP 응용 프로그램 서버의 경우 응용 프로그램 실행이 메모리에서 수행되고 디스크가 로깅에만 사용되기 때문에 Azure Standard Storage를 사용하여 비용을 절감할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-207">For SAP application servers, including the Central Services virtual machines, you can use Azure Standard Storage to reduce cost, because application execution takes place in memory and uses disks for logging only.</span></span> <span data-ttu-id="de324-208">그러나 이 시점에서 Standard Storage는 관리되지 않는 저장소에 대해서만 인증되었습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-208">However, at this time, Standard Storage is only certified for unmanaged storage.</span></span> <span data-ttu-id="de324-209">응용 프로그램 서버는 어떤 데이터도 호스팅하지 않으므로 더 작은 P4 및 P6 Premium Storage 디스크를 사용하여 비용을 최소화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-209">Since application servers do not host any data, you can also use the smaller P4 and P6 Premium Storage disks to help minimize cost.</span></span>

<span data-ttu-id="de324-210">백업 데이터 저장소의 경우 Azure [쿨 액세스 계층 저장소 및/또는 보관 액세스 계층 저장소](/azure/storage/storage-blob-storage-tiers)를 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-210">For the backup data store, we recommend using Azure [cool access tier storage and/or archive access tier storage](/azure/storage/storage-blob-storage-tiers).</span></span> <span data-ttu-id="de324-211">이러한 저장소 계층은 자주 액세스되지 않는 수명이 긴 데이터를 저장하는 비용 효율적인 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="de324-211">These storage tiers are cost-effective ways to store long-lived data that is less frequently accessed.</span></span>

## <a name="performance-considerations"></a><span data-ttu-id="de324-212">성능 고려 사항</span><span class="sxs-lookup"><span data-stu-id="de324-212">Performance considerations</span></span>

<span data-ttu-id="de324-213">SAP 응용 프로그램 서버는 데이터베이스 서버와 지속적으로 통신합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-213">SAP application servers carry on constant communications with the database servers.</span></span> <span data-ttu-id="de324-214">HANA 데이터베이스 가상 머신의 경우 [쓰기 가속기](/azure/virtual-machines/linux/how-to-enable-write-accelerator)를 사용하도록 설정하여 로그 쓰기 대기 시간을 향상시키는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-214">For the HANA database virtual machines, consider enabling [Write Accelerator](/azure/virtual-machines/linux/how-to-enable-write-accelerator) to improve log write latency.</span></span> <span data-ttu-id="de324-215">서버 간 통신을 최적화하려면 [가속 네트워크](https://azure.microsoft.com/blog/linux-and-windows-networking-performance-enhancements-accelerated-networking/)를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-215">To optimize inter-server communications, use the [Accelerated Network](https://azure.microsoft.com/blog/linux-and-windows-networking-performance-enhancements-accelerated-networking/).</span></span> <span data-ttu-id="de324-216">이러한 가속기는 특정 VM 시리즈에서만 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-216">Note that these accelerators are available only for certain VM series.</span></span>

<span data-ttu-id="de324-217">높은 IOPS 및 대역폭 처리량을 달성하려면 저장소 볼륨 [성능 최적화](/azure/virtual-machines/linux/premium-storage-performance)의 일반 사례를 Azure 저장소 레이아웃에 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-217">To achieve high IOPS and disk bandwidth throughput, the common practices in storage volume [performance optimization](/azure/virtual-machines/linux/premium-storage-performance) apply to Azure storage layout.</span></span> <span data-ttu-id="de324-218">예를 들어 여러 디스크를 결합하여 스트라이프 디스크 볼륨을 만들면 IO 성능이 향상됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-218">For example, combining multiple disks together to create a striped disk volume improves IO performance.</span></span> <span data-ttu-id="de324-219">자주 변경되지 않는 저장소 콘텐츠에 읽기 캐시를 사용하면 데이터 검색 속도가 향상됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-219">Enabling the read cache on storage content that changes infrequently enhances the speed of data retrieval.</span></span> <span data-ttu-id="de324-220">성능 요구 사항에 대한 자세한 내용은 [SAP Note 1943937 - 하드웨어 구성 검사 도구](https://launchpad.support.sap.com/#/notes/1943937)를 참조하세요. (여기에 액세스하려면 SAP Service Marketplace 계정이 필요합니다.)</span><span class="sxs-lookup"><span data-stu-id="de324-220">For details about performance requirements, see [SAP note 1943937 - Hardware Configuration Check Tool](https://launchpad.support.sap.com/#/notes/1943937) (SAP Service Marketplace account required for access).</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="de324-221">확장성 고려 사항</span><span class="sxs-lookup"><span data-stu-id="de324-221">Scalability considerations</span></span>

<span data-ttu-id="de324-222">SAP 응용 프로그램 계층에서 Azure는 강화 및 확장을 위한 다양한 가상 머신 크기를 제공합니다. 전체 목록은 [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533) - Azure의 SAP 응용 프로그램: 지원되는 제품 및 Azure VM 유형을 참조하세요. (여기에 액세스하려면 SAP Service Marketplace 계정이 필요합니다.)</span><span class="sxs-lookup"><span data-stu-id="de324-222">At the SAP application layer, Azure offers a wide range of virtual machine sizes for scaling up and scaling out. For an inclusive list, see [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533) - SAP Applications on Azure: Supported Products and Azure VM types (SAP Service Marketplace account required for access).</span></span> <span data-ttu-id="de324-223">더 많은 가상 머신 유형을 계속 인증함에 따라 동일한 클라우드 배포를 통해 강화 또는 축소할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-223">As we continue to certify more virtual machines types, you can scale up or down with the same cloud deployment.</span></span> 

<span data-ttu-id="de324-224">데이터베이스 계층에서 이 아키텍처는 VM에서 HANA를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-224">At the database layer, this architecture runs HANA on VMs.</span></span> <span data-ttu-id="de324-225">워크로드가 최대 VM 크기를 초과하는 경우 Microsoft는 SAP HANA에 [Azure 대규모 인스턴스](/azure/virtual-machines/workloads/sap/hana-overview-architecture)도 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-225">If your workload exceeds the maximum VM size, Microsoft also offers [Azure Large Instances](/azure/virtual-machines/workloads/sap/hana-overview-architecture) for SAP HANA.</span></span> <span data-ttu-id="de324-226">이러한 실제 서버는 Microsoft Azure 인증 데이터 센터에 함께 배치되며, 이 문서를 작성한 시점에서는 단일 인스턴스에 대해 최대 20TB의 메모리 용량을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-226">These physical servers are co-located in a Microsoft Azure certified datacenter and as of this writing, provide up to 20 TB of memory capacity for a single instance.</span></span> <span data-ttu-id="de324-227">다중 노드 구성도 가능하며 총 메모리 용량은 최대 60TB입니다.</span><span class="sxs-lookup"><span data-stu-id="de324-227">Multi-node configuration is also possible with a total memory capacity of up to 60 TB.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="de324-228">가용성 고려 사항</span><span class="sxs-lookup"><span data-stu-id="de324-228">Availability considerations</span></span>

<span data-ttu-id="de324-229">리소스 중복성은 고가용성 인프라 솔루션의 일반적인 주제입니다.</span><span class="sxs-lookup"><span data-stu-id="de324-229">Resource redundancy is the general theme in highly available infrastructure solutions.</span></span> <span data-ttu-id="de324-230">비교적 엄격하지 않은 SLA가 적용된 엔터프라이즈의 경우 단일 인스턴스 Azure VM에서 가동 시간 SLA를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-230">For enterprises that have a less stringent SLA, single-instance Azure VMs offer an uptime SLA.</span></span> <span data-ttu-id="de324-231">자세한 내용은 [Azure 서비스 수준 계약](https://azure.microsoft.com/support/legal/sla/)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="de324-231">For more information, see [Azure Service Level Agreement](https://azure.microsoft.com/support/legal/sla/).</span></span>

<span data-ttu-id="de324-232">SAP 응용 프로그램의 이러한 분산 설치에서는 고가용성을 달성하기 위해 기본 설치가 복제됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-232">In this distributed installation of the SAP application, the base installation is replicated to achieve high availability.</span></span> <span data-ttu-id="de324-233">아키텍처의 각 계층마다 고가용성 설계가 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="de324-233">For each layer of the architecture, the high availability design varies.</span></span> 

### <a name="application-tier"></a><span data-ttu-id="de324-234">응용 프로그램 계층</span><span class="sxs-lookup"><span data-stu-id="de324-234">Application tier</span></span>

- <span data-ttu-id="de324-235">Web Dispatcher.</span><span class="sxs-lookup"><span data-stu-id="de324-235">Web Dispatcher.</span></span> <span data-ttu-id="de324-236">고가용성은 중복 Web Dispatcher 인스턴스를 통해 달성됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-236">High availability is achieved with redundant Web Dispatcher instances.</span></span> <span data-ttu-id="de324-237">SAP 설명서의 [SAP Web Dispatcher](https://help.sap.com/doc/saphelp_nw70ehp2/7.02.16/en-us/48/8fe37933114e6fe10000000a421937/frameset.htm)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="de324-237">See [SAP Web Dispatcher](https://help.sap.com/doc/saphelp_nw70ehp2/7.02.16/en-us/48/8fe37933114e6fe10000000a421937/frameset.htm) in the SAP documentation.</span></span>
- <span data-ttu-id="de324-238">Fiori 서버.</span><span class="sxs-lookup"><span data-stu-id="de324-238">Fiori servers.</span></span> <span data-ttu-id="de324-239">고가용성은 서버 풀 내의 트래픽의 부하를 분산하여 달성됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-239">High availability is achieved by load balancing traffic within a pool of servers.</span></span>
- <span data-ttu-id="de324-240">Central Services.</span><span class="sxs-lookup"><span data-stu-id="de324-240">Central Services.</span></span> <span data-ttu-id="de324-241">Azure Linux 가상 머신에 있는 Central Services의 고가용성을 위해 선택한 Linux 배포판에 적절한 고가용성 확장이 사용되고 고가용성 NFS 클러스터에서 DRBD 저장소를 호스팅합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-241">For high availability of Central Services on Azure Linux virtual machines, the appropriate High Availability Extension for the selected Linux distribution is used, and the highly available NFS cluster hosts DRBD storage.</span></span>
- <span data-ttu-id="de324-242">응용 프로그램 서버.</span><span class="sxs-lookup"><span data-stu-id="de324-242">Application servers.</span></span> <span data-ttu-id="de324-243">응용 프로그램 서버 풀 내에서 트래픽을 분산하여 고가용성을 얻습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-243">High availability is achieved by load balancing traffic within a pool of application servers.</span></span>

### <a name="database-tier"></a><span data-ttu-id="de324-244">데이터베이스 계층</span><span class="sxs-lookup"><span data-stu-id="de324-244">Database tier</span></span>

<span data-ttu-id="de324-245">이 참조 아키텍처는 두 개의 Azure 가상 머신으로 구성된 고가용성 SAP HANA 데이터베이스 시스템을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="de324-245">This reference architecture depicts a highly available SAP HANA database system consisting of two Azure virtual machines.</span></span> <span data-ttu-id="de324-246">데이터베이스 계층의 기본 시스템 복제 기능은 복제된 노드 간에 수동 또는 자동 장애 조치를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-246">The database tier's native system replication feature provides either manual or automatic failover between replicated nodes:</span></span>

- <span data-ttu-id="de324-247">수동 장애 조치의 경우 둘 이상의 HANA 인스턴스를 배포하고 HSR(HANA 시스템 복제)을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-247">For manual failover, deploy more than one HANA instance and use HANA System Replication (HSR).</span></span>
- <span data-ttu-id="de324-248">자동 장애 조치의 경우 Linux 배포판용 HSR 및 Linux HAE(고가용성 확장)를 모두 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-248">For automatic failover, use both HSR and Linux High Availability Extension (HAE) for your Linux distribution.</span></span> <span data-ttu-id="de324-249">Linux HAE는 HANA 리소스에 클러스터 서비스를 제공하여 장애 이벤트를 감지하고 잘못된 서비스를 정상 노드로 장애 조치하도록 오케스트레이션합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-249">Linux HAE provides the cluster services to the HANA resources, detecting failure events and orchestrating the failover of errant services to the healthy node.</span></span> 

<span data-ttu-id="de324-250">[Microsoft Azure에서 실행되는 SAP 인증 및 구성](/azure/virtual-machines/workloads/sap/sap-certifications)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="de324-250">See [SAP certifications and configurations running on Microsoft Azure](/azure/virtual-machines/workloads/sap/sap-certifications).</span></span>

### <a name="disaster-recovery-considerations"></a><span data-ttu-id="de324-251">재해 복구 고려 사항</span><span class="sxs-lookup"><span data-stu-id="de324-251">Disaster recovery considerations</span></span>
<span data-ttu-id="de324-252">각 계층은 서로 다른 전략을 사용하여 재해 복구(DR) 보호를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-252">Each tier uses a different strategy to provide disaster recovery (DR) protection.</span></span>

- <span data-ttu-id="de324-253">**응용 프로그램 서버 계층**.</span><span class="sxs-lookup"><span data-stu-id="de324-253">**Application servers tier**.</span></span> <span data-ttu-id="de324-254">SAP 응용 프로그램 서버에는 비즈니스 데이터가 포함되어 있지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-254">SAP application servers do not contain business data.</span></span> <span data-ttu-id="de324-255">Azure에서 간단한 DR 전략은 보조 지역에 SAP 응용 프로그램 서버를 만든 다음, 종료하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="de324-255">On Azure, a simple DR strategy is to create SAP application servers in the secondary region, then shut them down.</span></span> <span data-ttu-id="de324-256">주 응용 프로그램 서버의 구성이 업데이트되거나 커널이 업데이트되는 즉시 동일한 변경 내용이 보조 지역의 가상 머신에 적용되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-256">Upon any configuration changes or kernel updates on the primary application server, the same changes must be applied to the virtual machines in the secondary region.</span></span> <span data-ttu-id="de324-257">예를 들어 SAP 커널 실행 파일을 DR 가상 머신에 복사합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-257">For example, copy the SAP kernel executables to the DR virtual machines.</span></span> <span data-ttu-id="de324-258">응용 프로그램 서버를 보조 지역에 자동으로 복제하려면 [Azure Site Recovery](/azure/site-recovery/site-recovery-overview)가 권장되는 솔루션입니다.</span><span class="sxs-lookup"><span data-stu-id="de324-258">For automatic replication of application servers to a secondary region, [Azure Site Recovery](/azure/site-recovery/site-recovery-overview) is the recommended solution.</span></span> <span data-ttu-id="de324-259">이 백서를 작성한 시점에서는 ASR에서 Azure VM의 가속 네트워크 구성 설정 복제를 아직 지원하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-259">As of the writing of this paper, ASR doesn't yet support the replication of the Accelerated Network configuration setting in Azure VMs.</span></span>

- <span data-ttu-id="de324-260">**Central Services**.</span><span class="sxs-lookup"><span data-stu-id="de324-260">**Central Services**.</span></span> <span data-ttu-id="de324-261">이 SAP 응용 프로그램 스택의 구성 요소도 비즈니스 데이터를 유지하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-261">This component of the SAP application stack also does not persist business data.</span></span> <span data-ttu-id="de324-262">보조 지역에 VM을 구축하여 Central Services 역할을 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-262">You can build a VM in the secondary region to run the Central Services role.</span></span> <span data-ttu-id="de324-263">주 Central Services 노드에서 동기화할 수 있는 유일한 콘텐츠는 /sapmnt 공유 콘텐츠입니다.</span><span class="sxs-lookup"><span data-stu-id="de324-263">The only content from the primary Central Services node to synchronize is the /sapmnt share content.</span></span> <span data-ttu-id="de324-264">또한 주 Central Services 서버에서 구성이 업데이트되거나 커널이 업데이트되면 Central Services를 실행하는 보조 지역의 VM에서 반복해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-264">Also, if configuration changes or kernel updates take place on the primary Central Services servers, they must be repeated on the VM in the secondary region running Central Services.</span></span> <span data-ttu-id="de324-265">두 서버를 동기화하려면 Azure Site Recovery를 사용하여 클러스터 노드를 복제하거나, 정기적으로 예약된 복사 작업을 사용하여 /sapmnt를 DR 쪽에 복사하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-265">To synchronize the two servers, you can use either Azure Site Recovery, to replicate the cluster nodes, or simply use a regularly scheduled copy job to copy /sapmnt to the DR side.</span></span> <span data-ttu-id="de324-266">장애 조치 프로세스를 빌드, 복사 및 테스트하는 방법에 대한 자세한 내용은 [SAP NetWeaver: Hyper-V 및 Microsoft Azure 기반 재해 복구 솔루션 빌드](http://download.microsoft.com/download/9/5/6/956FEDC3-702D-4EFB-A7D3-2DB7505566B6/SAP%20NetWeaver%20-%20Building%20an%20Azure%20based%20Disaster%20Recovery%20Solution%20V1_5%20.docx)를 다운로드하여 4.3, "SAP SPOF 계층(ASCS)"을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="de324-266">For details about the build, copy, and test failover process, download [SAP NetWeaver: Building a Hyper-V and Microsoft Azure–based Disaster Recovery Solution](http://download.microsoft.com/download/9/5/6/956FEDC3-702D-4EFB-A7D3-2DB7505566B6/SAP%20NetWeaver%20-%20Building%20an%20Azure%20based%20Disaster%20Recovery%20Solution%20V1_5%20.docx), and refer to section 4.3, "SAP SPOF layer (ASCS)."</span></span> <span data-ttu-id="de324-267">이 백서는 Windows에서 실행되는 NetWeaver에 적용되지만, Linux에 대해 동일한 구성을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-267">This paper applies to NetWeaver running on Windows, but you can create the equivalent configuration for Linux.</span></span> <span data-ttu-id="de324-268">Central Services의 경우 [Azure Site Recovery](/en-us/azure/site-recovery/site-recovery-overview)를 사용하여 클러스터 노드와 저장소를 복제합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-268">For Central Services, use [Azure Site Recovery](/en-us/azure/site-recovery/site-recovery-overview) to replicate the cluster nodes and storage.</span></span> <span data-ttu-id="de324-269">Linux의 경우 고가용성 확장을 사용하여 3개 노드 지역 클러스터를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="de324-269">For Linux, create a three node geo-cluster using a High Availability Extension.</span></span> 

- <span data-ttu-id="de324-270">**SAP 데이터베이스 계층**.</span><span class="sxs-lookup"><span data-stu-id="de324-270">**SAP database tier**.</span></span> <span data-ttu-id="de324-271">HANA 지원 복제에 HSR을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-271">Use HSR for HANA-supported replication.</span></span> <span data-ttu-id="de324-272">HSR은 로컬 2개 노드 고가용성 설정 외에도 별도의 Azure 지역에 있는 세 번째 노드가 클러스터에 속하지 않은 외부 엔터티의 역할을 하고, 클러스터된 HSR 쌍의 보조 복제본에 복제 대상으로 등록하는 다중 계층 복제를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-272">In addition to a local, two-node high availability setup, HSR supports multi-tier replication where a third node in a separate Azure region acts as a foreign entity, not part of the cluster, and registers to the secondary replica of the clustered HSR pair as its replication target.</span></span> <span data-ttu-id="de324-273">이렇게 하면 복제 데이지 체인이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="de324-273">This form a replication daisy chain.</span></span> <span data-ttu-id="de324-274">DR 노드로의 장애 조치는 수동 프로세스입니다.</span><span class="sxs-lookup"><span data-stu-id="de324-274">The failover to the DR node is a manual process.</span></span>

<span data-ttu-id="de324-275">Azure Site Recovery를 사용하여 원래 사이트가 완전히 복제된 사이트를 자동으로 구축하려면 사용자 지정 [배포 스크립트](/azure/site-recovery/site-recovery-runbook-automation)를 실행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-275">To use Azure Site Recovery to automatically build a fully replicated production site of your original, you must run customized [deployment scripts](/azure/site-recovery/site-recovery-runbook-automation).</span></span> <span data-ttu-id="de324-276">Site Recovery는 먼저 가용성 집합에 가상 머신을 배포한 다음, 스크립트를 실행하여 부하 분산 장치와 같은 리소스를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-276">Site Recovery first deploys the virtual machines in availability sets, then runs scripts to add resources such as load balancers.</span></span> 

## <a name="manageability-considerations"></a><span data-ttu-id="de324-277">관리 효율성 고려 사항</span><span class="sxs-lookup"><span data-stu-id="de324-277">Manageability considerations</span></span>

<span data-ttu-id="de324-278">SAP HANA에는 기본 Azure 인프라를 사용하는 백업 기능이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-278">SAP HANA has a backup feature that makes use of the underlying Azure infrastructure.</span></span> <span data-ttu-id="de324-279">Azure 가상 머신에서 실행되는 SAP HANA 데이터베이스를 백업하려면 SAP HANA 스냅숏과 Azure 저장소 스냅숏을 모두 사용하여 백업 파일의 일관성을 유지해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-279">To back up the SAP HANA database running on Azure virtual machines, both the SAP HANA snapshot and Azure storage snapshot are used to ensure the backup files' consistency.</span></span> <span data-ttu-id="de324-280">자세한 내용은 [Azure Virtual Machines의 SAP HANA Backup 가이드](/azure/virtual-machines/workloads/sap/sap-hana-backup-guide) 및 [Azure Backup 서비스 FAQ](/azure/backup/backup-azure-backup-faq)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="de324-280">For details, see [Backup guide for SAP HANA on Azure Virtual Machines](/azure/virtual-machines/workloads/sap/sap-hana-backup-guide) and the [Azure Backup service FAQ](/azure/backup/backup-azure-backup-faq).</span></span> <span data-ttu-id="de324-281">단일 HANA 컨테이너 배포만 Azure 저장소 스냅숏을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-281">Only HANA single container deployments support Azure storage snapshot.</span></span>

### <a name="identity-management"></a><span data-ttu-id="de324-282">ID 관리</span><span class="sxs-lookup"><span data-stu-id="de324-282">Identity management</span></span>

<span data-ttu-id="de324-283">모든 수준에서 중앙 집중식 ID 관리 시스템을 사용하여 리소스에 대한 액세스를 제어합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-283">Control access to resources by using a centralized identity management system at all levels:</span></span>

- <span data-ttu-id="de324-284">[RBAC(역할 기반 액세스 제어)](/azure/active-directory/role-based-access-control-what-is)를 통해 Azure 리소스에 대한 액세스를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-284">Provide access to Azure resources through [role-based access control](/azure/active-directory/role-based-access-control-what-is) (RBAC).</span></span> 
- <span data-ttu-id="de324-285">LDAP, Azure Active Directory, Kerberos 또는 다른 시스템을 통해 Azure VM에 대한 액세스 권한을 부여합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-285">Grant access to Azure VMs through LDAP, Azure Active Directory, Kerberos, or another system.</span></span> 
- <span data-ttu-id="de324-286">SAP에서 제공하는 서비스를 통해 앱 자체 내의 액세스를 지원하거나 [OAuth 2.0 및 Azure Active Directory](/azure/active-directory/develop/active-directory-protocols-oauth-code)를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-286">Support access within the apps themselves through the services that SAP provides, or use [OAuth 2.0 and Azure Active Directory](/azure/active-directory/develop/active-directory-protocols-oauth-code).</span></span> 

### <a name="monitoring"></a><span data-ttu-id="de324-287">모니터링</span><span class="sxs-lookup"><span data-stu-id="de324-287">Monitoring</span></span>

<span data-ttu-id="de324-288">Azure는 전체 인프라를 [모니터링 및 진단](/azure/architecture/best-practices/monitoring)하는 몇 가지 기능을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-288">Azure provides several functions for [monitoring and diagnostics](/azure/architecture/best-practices/monitoring) of the overall infrastructure.</span></span> <span data-ttu-id="de324-289">또한 Azure 가상 머신(Linux 또는 Windows)의 향상된 모니터링은 Azure OMS(Operations Management Suite)를 통해 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-289">Also, enhanced monitoring of Azure virtual machines (Linux or Windows) is handled by Azure Operations Management Suite (OMS).</span></span> 

<span data-ttu-id="de324-290">SAP 인프라의 리소스 및 서비스 성능에 대한 SAP 기반 모니터링을 제공하기 위해 [Azure SAP 고급 모니터링 확장](/azure/virtual-machines/workloads/sap/deployment-guide#d98edcd3-f2a1-49f7-b26a-07448ceb60ca)을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-290">To provide SAP-based monitoring of resources and service performance of the SAP infrastructure, the [Azure SAP Enhanced Monitoring](/azure/virtual-machines/workloads/sap/deployment-guide#d98edcd3-f2a1-49f7-b26a-07448ceb60ca) extension is used.</span></span> <span data-ttu-id="de324-291">이 확장은 SAP 응용 프로그램에 운영 체제 모니터링 및 DBA Cockpit 함수에 대한 Azure 모니터링 통계를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-291">This extension feeds Azure monitoring statistics into the SAP application for operating system monitoring and DBA Cockpit functions.</span></span> <span data-ttu-id="de324-292">SAP 고급 모니터링은 Azure에서 SAP를 실행하기 위한 필수 구성 요소입니다.</span><span class="sxs-lookup"><span data-stu-id="de324-292">SAP enhanced monitoring is a mandatory prerequisite to run SAP on Azure.</span></span> <span data-ttu-id="de324-293">자세한 내용은 [SAP Note 2191498](https://launchpad.support.sap.com/#/notes/2191498) - "Azure를 사용하는 Linux의 SAP: 고급 모니터링"을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="de324-293">For details, see [SAP Note 2191498](https://launchpad.support.sap.com/#/notes/2191498) – "SAP on Linux with Azure: Enhanced Monitoring."</span></span>

## <a name="security-considerations"></a><span data-ttu-id="de324-294">보안 고려 사항</span><span class="sxs-lookup"><span data-stu-id="de324-294">Security considerations</span></span>

<span data-ttu-id="de324-295">SAP는 자체적인 UME(사용자 관리 엔진)를 사용하여 SAP 응용 프로그램의 역할 기반 액세스 및 권한 부여를 제어합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-295">SAP has its own Users Management Engine (UME) to control role-based access and authorization within the SAP application.</span></span> <span data-ttu-id="de324-296">자세한 내용은 [SAP HANA 보안 - 개요](https://archive.sap.com/documents/docs/DOC-62943)를 참조하세요. (여기에 액세스하려면 SAP Service Marketplace 계정이 필요합니다.)</span><span class="sxs-lookup"><span data-stu-id="de324-296">For details, see [SAP HANA Security—An Overview](https://archive.sap.com/documents/docs/DOC-62943) (SAP Service Marketplace account required for access.)</span></span>

<span data-ttu-id="de324-297">추가 네트워크 보안을 위해 네트워크 가상 어플라이언스를 사용하여 Web Dispatcher 및 Fiori 프런트 엔드 서버 풀의 서브넷 앞에 방화벽을 만드는 [네트워크 DMZ](/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid)를 구현하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-297">For additional network security, consider implementing a [Network DMZ](/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid), which uses a network virtual appliance to create a firewall in front of the subnet for Web Dispatcher and Fiori Front-End Server pools.</span></span>

<span data-ttu-id="de324-298">인프라 보안을 위해 전송 중 데이터와 미사용 데이터가 암호화됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-298">For infrastructure security, data is encrypted in transit and at rest.</span></span> <span data-ttu-id="de324-299">[SAP NetWeaver에 대한 Azure Virtual Machines 계획 및 구현 가이드](/azure/virtual-machines/workloads/sap/planning-guide)의 "보안 고려 사항" 섹션에서 네트워크 보안 처리를 다루고 있으며, 이는 S/4HANA에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-299">The "Security considerations" section of the [SAP NetWeaver on Azure Virtual Machines–Planning and Implementation Guide](/azure/virtual-machines/workloads/sap/planning-guide) begins to address network security and applies to S/4HANA.</span></span> <span data-ttu-id="de324-300">이 가이드에서는 응용 프로그램 통신을 허용하기 위해 방화벽에서 열어야 하는 네트워크 포트도 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-300">The guide also specifies the network ports you must open on the firewalls to allow application communication.</span></span> 

<span data-ttu-id="de324-301">Linux IaaS 가상 머신 디스크를 암호화하려면 [Azure Disk Encryption](/azure/security/azure-security-disk-encryption)을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-301">To encrypt Linux IaaS virtual machine disks, you can use [Azure Disk Encryption](/azure/security/azure-security-disk-encryption).</span></span> <span data-ttu-id="de324-302">Linux의 DM-Crypt 기능을 사용하여 운영 체제 및 데이터 디스크에 대한 볼륨 암호화를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-302">It uses the DM-Crypt feature of Linux to provide volume encryption for the operating system and the data disks.</span></span> <span data-ttu-id="de324-303">또한 이 솔루션은 Azure Key Vault와 함께 작동하여 키 자격 증명 모음 구독에서 디스크 암호화 키와 비밀을 제어하고 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-303">The solution also works with Azure Key Vault to help you control and manage the disk-encryption keys and secrets in your key vault subscription.</span></span> <span data-ttu-id="de324-304">가상 머신 디스크의 데이터는 미사용 시 Azure 저장소에 암호화됩니다.</span><span class="sxs-lookup"><span data-stu-id="de324-304">Data on the virtual machine disks are encrypted at rest in your Azure storage.</span></span>

<span data-ttu-id="de324-305">SAP HANA 미사용 데이터 암호화의 경우 SAP HANA 네이티브 암호화 기술을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-305">For SAP HANA data-at-rest encryption, we recommend using the SAP HANA native encryption technology.</span></span> 

> [!NOTE]
> <span data-ttu-id="de324-306">HANA 미사용 데이터 암호화는 동일한 서버에서 Azure Disk Encryption을 통해 사용하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="de324-306">Do not use the HANA data-at-rest encryption with Azure Disk Encryption on the same server.</span></span> <span data-ttu-id="de324-307">HANA의 경우 HANA 데이터 암호화만 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="de324-307">For HANA, use only HANA data encryption.</span></span>

## <a name="communities"></a><span data-ttu-id="de324-308">커뮤니티</span><span class="sxs-lookup"><span data-stu-id="de324-308">Communities</span></span>

<span data-ttu-id="de324-309">커뮤니티는 질문에 대답하고 성공적인 배포를 설정하는 데 도움을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="de324-309">Communities can answer questions and help you set up a successful deployment.</span></span> <span data-ttu-id="de324-310">다음을 고려해 보세요.</span><span class="sxs-lookup"><span data-stu-id="de324-310">Consider the following:</span></span>

- [<span data-ttu-id="de324-311">Microsoft 플랫폼에서 SAP 응용 프로그램 실행 블로그</span><span class="sxs-lookup"><span data-stu-id="de324-311">Running SAP Applications on the Microsoft Platform Blog</span></span>](https://blogs.msdn.microsoft.com/saponsqlserver/2017/05/04/sap-on-azure-general-update-for-customers-partners-april-2017/)
- [<span data-ttu-id="de324-312">Azure 커뮤니티 지원</span><span class="sxs-lookup"><span data-stu-id="de324-312">Azure Community Support</span></span>](https://azure.microsoft.com/support/community/)
- [<span data-ttu-id="de324-313">SAP 커뮤니티</span><span class="sxs-lookup"><span data-stu-id="de324-313">SAP Community</span></span>](https://www.sap.com/community.html)
- [<span data-ttu-id="de324-314">스택 오버플로</span><span class="sxs-lookup"><span data-stu-id="de324-314">Stack Overflow</span></span>](https://stackoverflow.com/tags/sap/)

[visio-download]: https://archcenter.blob.core.windows.net/cdn/sap-reference-architectures.vsdx
