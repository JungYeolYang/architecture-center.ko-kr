---
title: Gatekeeper
description: Protect applications and services by using a dedicated host instance that acts as a broker between clients and the application or service, validates and sanitizes requests, and passes requests and data between them.
keywords: design pattern
author: dragon119

ms.service: guidance
ms.topic: article
ms.author: pnp
ms.date: 03/24/2017

pnp.series.title: Cloud Design Patterns
pnp.pattern.categories: [security]
---

# 게이트키퍼

[!INCLUDE [header](../_includes/header.md)]

클라이언트와 응용 프로그램 또는 서비스 사이에 브로커로 작용하는 전용 호스트 인스턴스를 사용해 응용 프로그램과 서비스를 보호하고, 요청을 확인하고 삭제하며, 요청 및 요청 사이의 데이터를 통과시킵니다. 이렇게 하면 보안의 추가 계층을 제공하고 시스템의 공격에 대한 취약성을 제어할 수 있습니다.

## 배경 및 문제

응용 프로그램은 요청을 수락하고 처리해 기능을 클라이언트에 공개합니다. 클라우드 호스팅 시나리오에서 응용 프로그램은 클라이언트가 연결되는 끝점을 노출하는데, 일반적으로 클라이언트의 요청을 처리하는 코드를 포함합니다. 인증과 유효성 검사 및 일부 또는 모든 요청 처리를 수행하는 이 코드는 클라이언트를 대리하여 저장소와 다른 서비스에 액세스할 수 있습니다.

악의적인 사용자가 시스템을 손상시키고 응용 프로그램의 호스팅 환경에 액세스할 수 있게 되면, 자격 증명과 저장소 키 같이 현재 시스템이 사용하고 있는 보안 방식과 현재 시스템이 액세스하는 서비스와 데이터가 노출됩니다. 그 결과 악의적인 사용자는 민감한 정보와 기타 서비스에 제약 없이 액세스할 수 있습니다. 

## 해결책

민감한 정보와 서비스에 액세스하는 클라이언트의 위험을 최소화하려면 요청을 처리하고 저장소에 액세스하는 코드에서 공용 끝점을 노출하는 호스트 또는 작업을 분리해야 합니다. 이와 같이 분리하려면 우선 외관 또는 클라이언트와 상호 작용하는 전용 작업을 사용한 다음 요청을 처리할 호스트 또는 작업에 요청을 전달할 때 분리된 인터페이스를 거치도록 조치해야 합니다. 다음 그림은 이런 패턴의 자세한 개요를 보여줍니다.

![High-level overview of this pattern](./_images/gatekeeper-diagram.png)


게이트키퍼 패턴은 저장소를 보호하는 간단한 방법으로 사용할 수 있거나 응용 프로그램의 모든 기능을 보호하기 위한 더 포괄적인 외관으로 사용할 수 있습니다. 중요한 요인은 다음과 같습니다.

- **유효성 검사 제어.** 게이트키퍼는 모든 요청의 유효성을 검사하고 유효성 검사 요구 사항을 충족하지 않는 요청을 거부합니다.
- **위험과 노출 제한.** 게이트키퍼는 저장소와 서비스에 액세스하기 위해 신뢰할 수 있는 호스트에서 사용하는 자격 증명 또는 키에 액세스하지 않습니다. 따라서 게이트키퍼가 손상되면 공격자는 이런 자격 증명 또는 키에 액세스하지 못합니다.
- **적절한 보안.** 게이트키퍼는 제한된 권한 모드에서 실행되는 반면, 나머지 응용 프로그램은 저장소와 서비스에 액세스하는 데 필요한 완전한 신뢰 모드에서 실행됩니다. 따라서 게이트키퍼가 손상되면 게이트키퍼는 응용 프로그램 서비스 또는 데이터에 직접 액세스할 수 없습니다.

이 패턴은 대표적인 네트워크 토폴로지에서 방화벽처럼 작용합니다. 따라서 게이트키퍼는 요청을 검사하고 필요한 작업을 수행하는 신뢰할 수 있는 호스트(때로 키마스터라 부름)에 요청을 전달할지 여부를 결정할 수 있습니다. 이런 결정을 내리기 위해 게이트키퍼는 보통 신뢰할 수 있는 호스트에 요청을 전달하기 전에 먼저 요청 내용의 유효성을 검사하고 요청 내용을 삭제합니다.

## 문제 및 고려 사항

이 패턴의 구현 방법을 결정할 때는 다음 사항을 고려해야 합니다.

- 게이트키퍼가 요청을 전달하는 신뢰할 수 있는 호스트가 내부 또는 보호된 끝점만 노출하거나 게이트키퍼에만 연결되는지 확인합니다. 신뢰할 수 있는 호스트는 외부 끝점 또는 인터페이스를 노출하지 않아야 합니다.
- 게이트키퍼는 제한된 권한 모드에서 실행되어야 합니다. 즉, 게이트키퍼와 신뢰할 수 있는 호스트를 분리된 호스팅 서비스 또는 가상 컴퓨터에서 실행합니다.
- 게이트키퍼는 응용 프로그램 또는 서비스와 관련된 처리를 수행하거나 데이터에 액세스해서는 안 됩니다. 게이트키퍼의 기능은 요청의 유효성 검사와 삭제로 제한됩니다. 요청에 대한 추가 유효성 검사를 신뢰할 수 있는 호스트가 수행할 필요가 있는 경우도 있지만, 핵심 유효성 검사는 게이트키퍼가 수행해야 합니다.
- 게이트키퍼와 신뢰할 수 있는 호스트 또는 작업 사이에는 보안 통신 채널(HTTPS, SSL, TLS)을 사용합니다. 그러나 일부 호스팅 환경은 HTTPS 또는 내부 끝점을 지원하지 않습니다.
- 게이트키퍼 패턴을 구현하기 위해 응용 프로그램에 추가 계층을 적용하면 추가 처리와 필요한 네트워크 통신으로 인해 성능에 일부 영향을 줄 수 있습니다.
- 게이트키퍼 인스턴스는 단일 실패 지점이 될 수 있습니다. 실패의 영향을 최소화하려면 추가 인스턴스의 배포 및 가용성을 유지하기 위한 자동 크기 조정 방식의 사용을 고려합니다.

## 패턴 사용 사례

다음 상황에는 이 패턴이 유용합니다.

- 민감한 정보를 처리하고, 악의적인 공격에 대해 높은 수준의 보호를 제공해야 하는 서비스를 노출하며, 중단되지 않아야 하는 중요 업무용 작업을 수행하는 응용 프로그램
- 주 작업과 분리해 요청의 유효성 검사를 수행하거나 이런 유효성 검사를 중앙집중화해 유지 관리와 관리를 단순화할 필요가 있는 분산 응용 프로그램

## 예제

클라우드 호스팅 시나리오에서 이 패턴은 게이트키퍼 역할 또는 가상 컴퓨터를 응용 프로그램의 신뢰할 수 있는 역할과 서비스에서 분리해 구현할 수 있습니다. 이 경우 중간 통신 방식으로 내부 끝점, 큐 또는 저장소를 사용합니다. 다음 그림은 내부 끝점의 사용을 보여줍니다.

![An example of the pattern using Cloud Services web and worker roles](./_images/gatekeeper-endpoint.png)


## 관련 패턴

[발렛 키 패턴](valet-key.md)도 게이트키퍼 패턴 구현에 관련될 수 있습니다. 게이트키퍼와 신뢰할 수 있는 역할 사이에 통신이 이루어질 때는 리소스 액세스 권한을 제한하는 키 또는 토큰을 사용해 보안을 강화할 것을 권장합니다.  특정 리소스 또는 서비스에 대한 제한적인 직접 액세스를 클라이언트에 제공하는 토큰 또는 키의 사용 방법을 설명합니다.
