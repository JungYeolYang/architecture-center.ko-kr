---
title: "Azure 서비스에 대한 복원력 검사 목록"
description: "다양한 Azure 서비스에 대한 복원력 지침을 제공하는 검사 목록입니다."
author: petertaylor9999
ms.date: 03/02/2018
ms.custom: resiliency, checklist
ms.openlocfilehash: 25d961d6bb753b1f515fc073e51bbb912cc59db7
ms.sourcegitcommit: 2123c25b1a0b5501ff1887f98030787191cf6994
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/08/2018
---
# <a name="resiliency-checklist-for-specific-azure-services"></a><span data-ttu-id="f94a3-103">특정 Azure 서비스에 대한 복원력 검사 목록</span><span class="sxs-lookup"><span data-stu-id="f94a3-103">Resiliency checklist for specific Azure services</span></span>

<span data-ttu-id="f94a3-104">복원력은 오류를 복구하여 계속 작동하는 시스템 기능이며 [소프트웨어 품질 핵심 요소](../guide/pillars.md) 중 하나입니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-104">Resiliency is the ability of a system to recover from failures and continue to function, and is one of the [pillars of software quality](../guide/pillars.md).</span></span> <span data-ttu-id="f94a3-105">모든 기술에는 고유한 특정 오류 모드가 있습니다. 이 기능은 응용 프로그램을 디자인하고 구현할 때 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-105">Every technology has its own particular failure modes, which you must consider when designing and implementing your application.</span></span> <span data-ttu-id="f94a3-106">이 검사 목록을 사용하여 특정 Azure 서비스에 대한 복원력 고려 사항을 검토합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-106">Use this checklist to review the resiliency considerations for specific Azure services.</span></span> <span data-ttu-id="f94a3-107">또한 [일반 복원력 검사 목록](./resiliency.md)을 검토합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-107">Also review the [general resiliency checklist](./resiliency.md).</span></span>

## <a name="app-service"></a><span data-ttu-id="f94a3-108">App Service</span><span class="sxs-lookup"><span data-stu-id="f94a3-108">App Service</span></span>

<span data-ttu-id="f94a3-109">**표준 또는 프리미엄 계층을 사용합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-109">**Use Standard or Premium tier.**</span></span> <span data-ttu-id="f94a3-110">이러한 계층은 스테이징 슬롯 및 자동화된 백업을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-110">These tiers support staging slots and automated backups.</span></span> <span data-ttu-id="f94a3-111">자세한 내용은 [Azure App Service 계획 심층 개요](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-111">For more information, see [Azure App Service plans in-depth overview](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/)</span></span>

<span data-ttu-id="f94a3-112">**확장 또는 축소를 피합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-112">**Avoid scaling up or down.**</span></span> <span data-ttu-id="f94a3-113">그 대신에 일반적인 부하에서 성능 요구 사항에 맞는 계층 및 인스턴스 크기를 선택한 다음 [규모 확장](/azure/app-service-web/web-sites-scale/)하여 트래픽 분량의 변화를 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-113">Instead, select a tier and instance size that meet your performance requirements under typical load, and then [scale out](/azure/app-service-web/web-sites-scale/) the instances to handle changes in traffic volume.</span></span> <span data-ttu-id="f94a3-114">확장 및 축소는 응용 프로그램 다시 시작을 트리거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-114">Scaling up and down may trigger an application restart.</span></span>  

<span data-ttu-id="f94a3-115">**구성을 앱 설정으로 저장합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-115">**Store configuration as app settings.**</span></span> <span data-ttu-id="f94a3-116">앱 설정을 사용하여 구성 설정을 앱 설정으로 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-116">Use app settings to hold configuration settings as app settings.</span></span> <span data-ttu-id="f94a3-117">Resource Manager 템플릿에 설정을 정의하거나 PowerShell을 사용하여 해당 설정을 자동화된 배포 / 업데이트 프로세스의 일부로 적용할 수 있도록 합니다(이 방법이 신뢰성이 더 높음).</span><span class="sxs-lookup"><span data-stu-id="f94a3-117">Define the settings in your Resource Manager templates, or using PowerShell, so that you can apply them as part of an automated deployment / update process, which is more reliable.</span></span> <span data-ttu-id="f94a3-118">자세한 내용은 [Azure App Service에서 웹앱 구성](/azure/app-service-web/web-sites-configure/)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-118">For more information, see [Configure web apps in Azure App Service](/azure/app-service-web/web-sites-configure/).</span></span>

<span data-ttu-id="f94a3-119">**프로덕션 및 테스트에 대해 별도의 앱 서비스 계획을 만듭니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-119">**Create separate App Service plans for production and test.**</span></span> <span data-ttu-id="f94a3-120">테스트를 위한 프로덕션 배포에 슬롯을 사용하지 마십시오.</span><span class="sxs-lookup"><span data-stu-id="f94a3-120">Don't use slots on your production deployment for testing.</span></span>  <span data-ttu-id="f94a3-121">동일한 App Service 계획 내의 모든 앱은 같은 VM 인스턴스를 공유합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-121">All apps within the same App Service plan share the same VM instances.</span></span> <span data-ttu-id="f94a3-122">프로덕션과 테스트 배포를 동일한 계획에 배치하면 프로덕션 배포에 부정적 영향을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-122">If you put production and test deployments in the same plan, it can negatively affect the production deployment.</span></span> <span data-ttu-id="f94a3-123">예를 들어 부하 테스트는 실시간 프로덕션 사이트의 성능을 저하시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-123">For example, load tests might degrade the live production site.</span></span> <span data-ttu-id="f94a3-124">테스트 배포를 별도의 계획에 배치하여 프로덕션 버전과 격리합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-124">By putting test deployments into a separate plan, you isolate them from the production version.</span></span>  

<span data-ttu-id="f94a3-125">**웹앱을 웹 API와 분리합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-125">**Separate web apps from web APIs.**</span></span> <span data-ttu-id="f94a3-126">솔루션에 웹 프런트 엔드 및 웹 API가 모두 포함된 경우 이들을 별도의 App Service 앱으로 분해하는 것을 고려합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-126">If your solution has both a web front-end and a web API, consider decomposing them into separate App Service apps.</span></span> <span data-ttu-id="f94a3-127">이 설계를 통해 워크로드별로 솔루션을 분해하기가 더 쉬워집니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-127">This design makes it easier to decompose the solution by workload.</span></span> <span data-ttu-id="f94a3-128">웹앱과 API를 별도의 App Service 계획에서 실행할 수 있으므로 이들을 독립적으로 크기 조정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-128">You can run the web app and the API in separate App Service plans, so they can be scaled independently.</span></span> <span data-ttu-id="f94a3-129">처음에 이러한 수준의 확장성이 필요하지 않은 경우 앱을 동일한 계획에 배포하고 필요한 경우 나중에 별도의 계획으로 이동할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-129">If you don't need that level of scalability at first, you can deploy the apps into the same plan, and move them into separate plans later, if needed.</span></span>

<span data-ttu-id="f94a3-130">**앱 서비스 백업 기능을 사용하여 Azure SQL Database를 백업하는 것을 피하십시오.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-130">**Avoid using the App Service backup feature to back up Azure SQL databases.**</span></span> <span data-ttu-id="f94a3-131">그 대신에 [SQL Database 자동화된 백업][sql-backup]을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-131">Instead, use [SQL Database automated backups][sql-backup].</span></span> <span data-ttu-id="f94a3-132">App Service 백업은 데이터베이스를 SQL .bacpac 파일에 내보내는데, 이때 DTU 비용이 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-132">App Service backup exports the database to a SQL .bacpac file, which costs DTUs.</span></span>  

<span data-ttu-id="f94a3-133">**스테이징 슬롯에 배포**</span><span class="sxs-lookup"><span data-stu-id="f94a3-133">**Deploy to a staging slot.**</span></span> <span data-ttu-id="f94a3-134">스테이징을 위한 배포 슬롯을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-134">Create a deployment slot for staging.</span></span> <span data-ttu-id="f94a3-135">응용 프로그램 업데이트를 스테이징 슬롯에 배포하고 프로덕션으로 교환하기 전에 배포를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-135">Deploy application updates to the staging slot, and verify the deployment before swapping it into production.</span></span> <span data-ttu-id="f94a3-136">이렇게 하면 프로덕션에서 잘못된 업데이트의 기회가 감소합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-136">This reduces the chance of a bad update in production.</span></span> <span data-ttu-id="f94a3-137">또한 모든 인스턴스가 프로덕션으로 교환되기 전에 확실히 준비되기도 합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-137">It also ensures that all instances are warmed up before being swapped into production.</span></span> <span data-ttu-id="f94a3-138">많은 응용 프로그램에는 중요한 준비 및 콜드 부팅 시간이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-138">Many applications have a significant warmup and cold-start time.</span></span> <span data-ttu-id="f94a3-139">자세한 내용은 [Azure App Service에서 웹앱에 대한 스테이징 환경 설정](/azure/app-service-web/web-sites-staged-publishing/)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-139">For more information, see [Set up staging environments for web apps in Azure App Service](/azure/app-service-web/web-sites-staged-publishing/).</span></span>

<span data-ttu-id="f94a3-140">**마지막으로 성공한(LKG) 배포를 저장하는 배포 슬롯을 만듭니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-140">**Create a deployment slot to hold the last-known-good (LKG) deployment.**</span></span> <span data-ttu-id="f94a3-141">업데이트를 프로덕션에 배포하는 경우 이전 프로덕션 배포를 LKG 슬롯으로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-141">When you deploy an update to production, move the previous production deployment into the LKG slot.</span></span> <span data-ttu-id="f94a3-142">이렇게 하면 잘못된 배포를 롤백하기가 더 쉬워집니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-142">This makes it easier to roll back a bad deployment.</span></span> <span data-ttu-id="f94a3-143">나중에 문제가 발견되면 LKG 버전으로 신속하게 되돌릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-143">If you discover a problem later, you can quickly revert to the LKG version.</span></span> <span data-ttu-id="f94a3-144">자세한 내용은 [기본적인 웹 응용 프로그램](../reference-architectures/app-service-web-app/basic-web-app.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-144">For more information, see [Basic web application](../reference-architectures/app-service-web-app/basic-web-app.md).</span></span>

<span data-ttu-id="f94a3-145">응용 프로그램 로깅 및 웹 서버 로깅을 포함하여 **진단 로깅 설정**합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-145">**Enable diagnostics logging**, including application logging and web server logging.</span></span> <span data-ttu-id="f94a3-146">로깅은 모니터링 및 진단을 위해 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-146">Logging is important for monitoring and diagnostics.</span></span> <span data-ttu-id="f94a3-147">[Azure App Service에서 웹앱에 대한 진단 로깅 설정](/azure/app-service-web/web-sites-enable-diagnostic-log/) 참조</span><span class="sxs-lookup"><span data-stu-id="f94a3-147">See [Enable diagnostics logging for web apps in Azure App Service](/azure/app-service-web/web-sites-enable-diagnostic-log/)</span></span>

<span data-ttu-id="f94a3-148">**Blob 저장소에 기록합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-148">**Log to blob storage.**</span></span> <span data-ttu-id="f94a3-149">이렇게 하면 보다 쉽게 데이터를 수집 및 분석할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-149">This makes it easier to collect and analyze the data.</span></span>

<span data-ttu-id="f94a3-150">**로그에 대한 별도의 저장소 계정을 만듭니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-150">**Create a separate storage account for logs.**</span></span> <span data-ttu-id="f94a3-151">로그와 응용 프로그램 데이터에 동일한 저장소 계정을 사용하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-151">Don't use the same storage account for logs and application data.</span></span> <span data-ttu-id="f94a3-152">이렇게 하면 로깅이 응용 프로그램의 성능을 감소시키는 것을 방지하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-152">This helps to prevent logging from reducing application performance.</span></span>

<span data-ttu-id="f94a3-153">**성능을 모니터링합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-153">**Monitor performance.**</span></span> <span data-ttu-id="f94a3-154">[New Relic](http://newrelic.com/) 또는 [Application Insights](/azure/application-insights/app-insights-overview/) 같은 성능 모니터링 서비스를 사용하여 응용 프로그램 성능 및 부하를 받을 때의 동작을 모니터링합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-154">Use a performance monitoring service such as [New Relic](http://newrelic.com/) or [Application Insights](/azure/application-insights/app-insights-overview/) to monitor application performance and behavior under load.</span></span>  <span data-ttu-id="f94a3-155">성능 모니터링은 응용 프로그램에 대한 실시간 통찰력을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-155">Performance monitoring gives you real-time insight into the application.</span></span> <span data-ttu-id="f94a3-156">문제를 진단하고 실패의 근본 원인 분석을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-156">It enables you to diagnose issues and perform root-cause analysis of failures.</span></span>

## <a name="application-gateway"></a><span data-ttu-id="f94a3-157">Application Gateway</span><span class="sxs-lookup"><span data-stu-id="f94a3-157">Application Gateway</span></span>

<span data-ttu-id="f94a3-158">**인스턴스를 두 개 이상 프로비전합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-158">**Provision at least two instances.**</span></span> <span data-ttu-id="f94a3-159">응용 프로그램 게이트웨이를 두 개 이상의 인스턴스와 함께 배포합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-159">Deploy Application Gateway with at least two instances.</span></span> <span data-ttu-id="f94a3-160">단일 인스턴스는 단일 실패 지점입니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-160">A single instance is a single point of failure.</span></span> <span data-ttu-id="f94a3-161">중복성 및 확장성을 위해 인스턴스를 두 개 이상 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-161">Use two or more instances for redundancy and scalability.</span></span> <span data-ttu-id="f94a3-162">[SLA](https://azure.microsoft.com/support/legal/sla/application-gateway/v1_0/)에 대한 자격을 얻으려면 중, 두 개 이상의 보통 이상의 인스턴스를 두 개 이상 프로비전해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-162">In order to qualify for the [SLA](https://azure.microsoft.com/support/legal/sla/application-gateway/v1_0/), you must provision two or more medium or larger instances.</span></span>

## <a name="cosmos-db"></a><span data-ttu-id="f94a3-163">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="f94a3-163">Cosmos DB</span></span>

<span data-ttu-id="f94a3-164">**지역에 걸쳐 데이터베이스를 복제합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-164">**Replicate the database across regions.**</span></span> <span data-ttu-id="f94a3-165">Cosmos DB를 사용하면 개수에 관계없이 Azure 지역을 원하는 만큼 Cosmos DB 데이터베이스 계정에 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-165">Cosmos DB allows you to associate any number of Azure regions with a Cosmos DB database account.</span></span> <span data-ttu-id="f94a3-166">Cosmos DB 데이터베이스는 하나의 쓰기 지역 및 다중 읽기 지역을 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-166">A Cosmos DB database can have one write region and multiple read regions.</span></span> <span data-ttu-id="f94a3-167">쓰기 지역에 오류가 있으면 다른 복제본에서 읽을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-167">If there is a failure in the write region, you can read from another replica.</span></span> <span data-ttu-id="f94a3-168">클라이언트 SDK는 이 작업을 자동으로 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-168">The Client SDK handles this automatically.</span></span> <span data-ttu-id="f94a3-169">또한 쓰기 지역을 다른 지역으로 장애 조치할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-169">You can also fail over the write region to another region.</span></span> <span data-ttu-id="f94a3-170">자세한 내용은 [Azure Cosmos DB로 데이터를 전역적으로 배포하는 방법](/azure/cosmos-db/distribute-data-globally)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-170">For more information, see [How to distribute data globally with Azure Cosmos DB](/azure/cosmos-db/distribute-data-globally).</span></span>

## <a name="event-hubs"></a><span data-ttu-id="f94a3-171">Event Hubs
</span><span class="sxs-lookup"><span data-stu-id="f94a3-171">Event Hubs</span></span>

<span data-ttu-id="f94a3-172">**검사점 사용**.</span><span class="sxs-lookup"><span data-stu-id="f94a3-172">**Use checkpoints**.</span></span>  <span data-ttu-id="f94a3-173">이벤트 소비자는 미리 정의된 간격으로 영구 저장소에 현재 위치를 기록해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-173">An event consumer should write its current position to persistent storage at some predefined interval.</span></span> <span data-ttu-id="f94a3-174">이렇게 하면 소비자에게 오류가 발생하는 경우(예: 소비자에게 충돌이나 호스트 장애가 발생하는 경우) 새 인스턴스가 마지막으로 기록된 위치에서 스트림 읽기를 다시 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-174">That way, if the consumer experiences a fault (for example, the consumer crashes, or the host fails), then a new instance can resume reading the stream from the last recorded position.</span></span> <span data-ttu-id="f94a3-175">자세한 내용은 [이벤트 소비자](/azure/event-hubs/event-hubs-features#event-consumers)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-175">For more information, see [Event consumers](/azure/event-hubs/event-hubs-features#event-consumers).</span></span>

<span data-ttu-id="f94a3-176">**중복 메시지 처리.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-176">**Handle duplicate messages.**</span></span> <span data-ttu-id="f94a3-177">이벤트 소비자가 실패하면 메시지 처리가 기록된 마지막 검사점에서 다시 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-177">If an event consumer fails, message processing is resumed from the last recorded checkpoint.</span></span> <span data-ttu-id="f94a3-178">마지막 검사점 이후에 이미 처리된 메시지가 다시 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-178">Any messages that were already processed after the last checkpoint will be processed again.</span></span> <span data-ttu-id="f94a3-179">따라서 메시지 처리 논리가 idempotent이거나 응용 프로그램이 메시지를 중복할 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-179">Therefore, your message processing logic must be idempotent, or the application must be able to deduplicate messages.</span></span>

<span data-ttu-id="f94a3-180">**예외 처리.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-180">**Handle exceptions.**.</span></span> <span data-ttu-id="f94a3-181">이벤트 소비자는 일반적으로 루프에 있는 메시지를 일괄 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-181">An event consumer typically processes a batch of messages in a loop.</span></span> <span data-ttu-id="f94a3-182">단일 메시지에 예외가 발생하는 경우 전체 메시지의 일괄 처리가 손실되지 않도록 하려면 이 처리 루프 내에서 예외를 처리해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-182">You should handle exceptions within this processing loop to avoid losing an entire batch of messages if a single message causes an exception.</span></span>

<span data-ttu-id="f94a3-183">**배달하지 못한 편지 큐 사용.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-183">**Use a dead-letter queue.**</span></span> <span data-ttu-id="f94a3-184">메시지를 처리하여 일시적이지 않은 오류가 발생한 경우 상태를 추적할 수 있도록 배달하지 못한 편지 큐에 메시지를 배치합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-184">If processing a message results in a non-transient failure, put the message onto a dead-letter queue, so that you can track the status.</span></span> <span data-ttu-id="f94a3-185">시나리오에 따라 메시지를 나중에 다시 시도하거나, 보정 트랜잭션을 적용하거나, 다른 작업을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-185">Depending on the scenario, you might retry the message later, apply a compensating transaction, or take some other action.</span></span> <span data-ttu-id="f94a3-186">Event Hubs에는 기본 제공 배달하지 못한 편지 큐 기능이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-186">Note that Event Hubs does not have any built-in dead-letter queue functionality.</span></span> <span data-ttu-id="f94a3-187">Azure Queue Storage 또는 Service Bus를 사용하여 배달하지 못한 편지 큐를 구현하거나 Azure Functions 또는 다른 이벤트 메커니즘을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-187">You can use Azure Queue Storage or Service Bus to implement a dead-letter queue, or use Azure Functions or some other eventing mechanism.</span></span>  

<span data-ttu-id="f94a3-188">**보조 Event Hubs 네임스페이스에 장애 조치하여 재해 복구 구현.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-188">**Implement disaster recovery by failing over to a secondary Event Hubs namespace.**</span></span> <span data-ttu-id="f94a3-189">자세한 내용은 [Azure Event Hubs 지역 재해 복구](/azure/event-hubs/event-hubs-geo-dr)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-189">For more information, see [Azure Event Hubs Geo-disaster recovery](/azure/event-hubs/event-hubs-geo-dr).</span></span>

## <a name="redis-cache"></a><span data-ttu-id="f94a3-190">Redis Cache</span><span class="sxs-lookup"><span data-stu-id="f94a3-190">Redis Cache</span></span>

<span data-ttu-id="f94a3-191">**지역에서 복제 구성**.</span><span class="sxs-lookup"><span data-stu-id="f94a3-191">**Configure Geo-replication**.</span></span> <span data-ttu-id="f94a3-192">지역에서 복제는 두 개의 프리미엄 계층 Azure Redis Cache 인스턴스를 연결하는 메커니즘을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-192">Geo-replication provides a mechanism for linking two Premium tier Azure Redis Cache instances.</span></span> <span data-ttu-id="f94a3-193">기본 캐시에 작성된 데이터는 읽기 전용 보조 캐시에 복제됩니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-193">Data written to the primary cache is replicated to a secondary read-only cache.</span></span> <span data-ttu-id="f94a3-194">자세한 내용은 [Azure Redis Cache에 대해 지역에서 복제를 구성하는 방법](/azure/redis-cache/cache-how-to-geo-replication)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-194">For more information, see [How to configure Geo-replication for Azure Redis Cache](/azure/redis-cache/cache-how-to-geo-replication)</span></span>

<span data-ttu-id="f94a3-195">**데이터 지속성 구성.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-195">**Configure data persistence.**</span></span> <span data-ttu-id="f94a3-196">Redis 지속성을 사용하면 Redis에 저장된 데이터를 유지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-196">Redis persistence allows you to persist data stored in Redis.</span></span> <span data-ttu-id="f94a3-197">또한 스냅숏을 만들고, 하드웨어 오류 시 로드할 수 있게 데이터를 백업할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-197">You can also take snapshots and back up the data, which you can load in case of a hardware failure.</span></span> <span data-ttu-id="f94a3-198">자세한 내용은 [프리미엄 Azure Redis Cache에 데이터 지속성을 구성하는 방법](/azure/redis-cache/cache-how-to-premium-persistence)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-198">For more information, see [How to configure data persistence for a Premium Azure Redis Cache](/azure/redis-cache/cache-how-to-premium-persistence)</span></span>

<span data-ttu-id="f94a3-199">Redis Cache를 영구 저장소가 아닌 임시 데이터 캐시로 사용하는 경우 이러한 권장 사항이 적용되지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-199">If you are using Redis Cache as a temporary data cache and not as a persistent store, these recommendations may not apply.</span></span> 

## <a name="search"></a><span data-ttu-id="f94a3-200">검색</span><span class="sxs-lookup"><span data-stu-id="f94a3-200">Search</span></span>

<span data-ttu-id="f94a3-201">**복제본을 두 개 이상 프로비전합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-201">**Provision more than one replica.**</span></span> <span data-ttu-id="f94a3-202">읽기 고가용성을 위해서는 복제를 두 개 이상, 또는 읽기-쓰기 고가용성을 위해서는 세 개 이상 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-202">Use at least two replicas for read high-availability, or three for read-write high-availability.</span></span>

<span data-ttu-id="f94a3-203">**다중 지역 배포의 경우 인덱서를 구성합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-203">**Configure indexers for multi-region deployments.**</span></span> <span data-ttu-id="f94a3-204">다중 지역 배포를 설정한 경우 옵션에 대해 인덱싱의 지속성을 고려합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-204">If you have a multi-region deployment, consider your options for continuity in indexing.</span></span>

  * <span data-ttu-id="f94a3-205">데이터 원본이 지리적으로 복제되는 경우 일반적으로 각 Azure Search의 인덱서가 각각 해당 로컬 데이터 원본 복제본을 가리키게 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-205">If the data source is geo-replicated, you should generally point each indexer of each regional Azure Search service to its local data source replica.</span></span> <span data-ttu-id="f94a3-206">그러나 Azure SQL Database에 저장된 대형 데이터 집합의 경우 이 방법이 권장되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-206">However, that approach is not recommended for large datasets stored in Azure SQL Database.</span></span> <span data-ttu-id="f94a3-207">그 이유는 Azure Search가 보조 SQL Database 복제에서 증분 인덱싱을 수행할 수 없고 주 복제본에서만 가능하기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-207">The reason is that Azure Search cannot perform incremental indexing from secondary SQL Database replicas, only from primary replicas.</span></span> <span data-ttu-id="f94a3-208">그 대신에 모든 인덱서가 주 복제본을 가리킵니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-208">Instead, point all indexers to the primary replica.</span></span> <span data-ttu-id="f94a3-209">장애 조치 후 새 주 복제본에서 Azure Search 인덱서를 가리킵니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-209">After a failover, point the Azure Search indexers at the new primary replica.</span></span>  
  * <span data-ttu-id="f94a3-210">데이터 원본이 지리적으로 복제되지 않는 경우 여러 지역의 Azure Search 서비스가 지속적으로 그리고 독립적으로 데이터 원본에서 인덱싱하도록 여러 인덱서가 동일한 데이터 원본을 가리키게 합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-210">If the data source is not geo-replicated, point multiple indexers at the same data source, so that Azure Search services in multiple regions continuously and independently index from the data source.</span></span> <span data-ttu-id="f94a3-211">자세한 내용은 [Azure Search 성능 및 최적화 고려 사항][search-optimization]을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-211">For more information, see [Azure Search performance and optimization considerations][search-optimization].</span></span>

## <a name="storage"></a><span data-ttu-id="f94a3-212">Storage</span><span class="sxs-lookup"><span data-stu-id="f94a3-212">Storage</span></span>

<span data-ttu-id="f94a3-213">**응용 프로그램 데이터의 경우 RA-GRS(읽기-쓰기 지역 중복 저장소)를 사용합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-213">**For application data, use read-access geo-redundant storage (RA-GRS).**</span></span> <span data-ttu-id="f94a3-214">RA-GRS 저장소는 데이터를 보조 지역에 복제하고 보조 지역에서 읽기 전용 액세스를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-214">RA-GRS storage replicates the data to a secondary region, and provides read-only access from the secondary region.</span></span> <span data-ttu-id="f94a3-215">주 지역에 저장소 중단이 있는 경우 응용 프로그램은 보조 지역에서 데이터를 읽을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-215">If there is a storage outage in the primary region, the application can read the data from the secondary region.</span></span> <span data-ttu-id="f94a3-216">자세한 내용은 [Azure Storage 복제](/azure/storage/storage-redundancy/)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-216">For more information, see [Azure Storage replication](/azure/storage/storage-redundancy/).</span></span>

<span data-ttu-id="f94a3-217">**VM 디스크의 경우 Managed Disks를 사용합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-217">**For VM disks, use Managed Disks.**</span></span> <span data-ttu-id="f94a3-218">[Managed Disks][managed-disks]는 디스크들이 서로 충분히 격리되어 단일 실패 지점을 방지하므로 가용성 집합의 VM에 대해 더 나은 신뢰성을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-218">[Managed Disks][managed-disks] provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure.</span></span> <span data-ttu-id="f94a3-219">또한 Managed Disks는 저장소 계정에서 만든 VHD의 IOPS 제한이 적용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-219">Also, Managed Disks aren't subject to the IOPS limits of VHDs created in a storage account.</span></span> <span data-ttu-id="f94a3-220">자세한 내용은 [Azure에서 Windows 가상 머신의 가용성 관리][vm-manage-availability]를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-220">For more information, see [Manage the availability of Windows virtual machines in Azure][vm-manage-availability].</span></span>

<span data-ttu-id="f94a3-221">**Queue Storage의 경우 다른 지역에 백업 큐를 만듭니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-221">**For Queue storage, create a backup queue in another region.**</span></span> <span data-ttu-id="f94a3-222">Queue Storage의 경우 항목을 큐에 저장하거나 큐에서 제거할 수 없으므로 읽기 전용 복제본의 사용이 제한됩니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-222">For Queue storage, a read-only replica has limited use, because you can't queue or dequeue items.</span></span> <span data-ttu-id="f94a3-223">그 대신에 다른 지역의 저장소 계정에 백업 큐를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-223">Instead, create a backup queue in a storage account in another region.</span></span> <span data-ttu-id="f94a3-224">저장소 중단이 있는 경우 응용 프로그램은 주 지역이 다시 사용할 수 있게 될 때까지 백업 큐를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-224">If there is a storage outage, the application can use the backup queue, until the primary region becomes available again.</span></span> <span data-ttu-id="f94a3-225">이런 방식으로 응용 프로그램이 새 요청을 계속 처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-225">That way, the application can still process new requests.</span></span>  

## <a name="sql-database"></a><span data-ttu-id="f94a3-226">SQL Database</span><span class="sxs-lookup"><span data-stu-id="f94a3-226">SQL Database</span></span>

<span data-ttu-id="f94a3-227">**표준 또는 프리미엄 계층을 사용합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-227">**Use Standard or Premium tier.**</span></span> <span data-ttu-id="f94a3-228">이러한 계층은 더 긴 지정 시간 복원 기간(35일)을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-228">These tiers provide a longer point-in-time restore period (35 days).</span></span> <span data-ttu-id="f94a3-229">자세한 내용은 [SQL Database 옵션 및 성능](/azure/sql-database/sql-database-service-tiers/)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-229">For more information, see [SQL Database options and performance](/azure/sql-database/sql-database-service-tiers/).</span></span>

<span data-ttu-id="f94a3-230">**SQL Database 감사를 사용합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-230">**Enable SQL Database auditing.**</span></span> <span data-ttu-id="f94a3-231">감사를 사용하면 악의적 공격 또는 인적 오류를 진단할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-231">Auditing can be used to diagnose malicious attacks or human error.</span></span> <span data-ttu-id="f94a3-232">자세한 내용은 [SQL 데이터베이스 감사 시작](/azure/sql-database/sql-database-auditing-get-started/)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-232">For more information, see [Get started with SQL database auditing](/azure/sql-database/sql-database-auditing-get-started/).</span></span>

<span data-ttu-id="f94a3-233">**활성 지역 복제 사용** 활성 지역 복제를 사용하여 서로 다른 지역에 읽을 수 있는 보조 복제를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-233">**Use Active Geo-Replication** Use Active Geo-Replication to create a readable secondary in a different region.</span></span>  <span data-ttu-id="f94a3-234">주 데이터베이스가 실패하거나 단순히 오프라인으로 전환해야 하는 경우 보조 데이터베이스로 장애 조치를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-234">If your primary database fails, or simply needs to be taken offline, perform a manual failover to the secondary database.</span></span>  <span data-ttu-id="f94a3-235">장애 조치(failover)될 때까지 보조 데이터베이스는 읽기 전용으로 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-235">Until you fail over, the secondary database remains read-only.</span></span>  <span data-ttu-id="f94a3-236">자세한 내용은 [SQL Database 활성 지역 복제](/azure/sql-database/sql-database-geo-replication-overview/)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-236">For more information, see [SQL Database Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/).</span></span>

<span data-ttu-id="f94a3-237">**분할을 사용합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-237">**Use sharding.**</span></span> <span data-ttu-id="f94a3-238">분할을 사용하여 데이터베이스를 가로로 분할하는 것을 고려합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-238">Consider using sharding to partition the database horizontally.</span></span> <span data-ttu-id="f94a3-239">분할은 오류 격리를 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-239">Sharding can provide fault isolation.</span></span> <span data-ttu-id="f94a3-240">자세한 내용은 [Azure SQL Database를 사용하여 분할](/azure/sql-database/sql-database-elastic-scale-introduction/)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-240">For more information, see [Scaling out with Azure SQL Database](/azure/sql-database/sql-database-elastic-scale-introduction/).</span></span>

<span data-ttu-id="f94a3-241">**지정 시간 복원을 사용하여 인적 오류에서 복구합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-241">**Use point-in-time restore to recover from human error.**</span></span>  <span data-ttu-id="f94a3-242">지정 시간 복원은 데이터베이스를 이전 시점으로 되돌려 놓습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-242">Point-in-time restore returns your database to an earlier point in time.</span></span> <span data-ttu-id="f94a3-243">자세한 내용은 [자동화된 데이터베이스 백업을 사용하여 Azure SQL 데이터베이스 복구][sql-restore]를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-243">For more information, see [Recover an Azure SQL database using automated database backups][sql-restore].</span></span>

<span data-ttu-id="f94a3-244">**지리적 복원을 사용하여 서비스 중단에서 복구합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-244">**Use geo-restore to recover from a service outage.**</span></span> <span data-ttu-id="f94a3-245">지리적 복원은 지역 중복 백업에서 데이터베이스를 복원합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-245">Geo-restore restores a database from a geo-redundant backup.</span></span>  <span data-ttu-id="f94a3-246">자세한 내용은 [자동화된 데이터베이스 백업을 사용하여 Azure SQL 데이터베이스 복구][sql-restore]를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-246">For more information, see [Recover an Azure SQL database using automated database backups][sql-restore].</span></span>

## <a name="sql-server-running-in-a-vm"></a><span data-ttu-id="f94a3-247">VM에서 실행되는 SQL Server</span><span class="sxs-lookup"><span data-stu-id="f94a3-247">SQL Server running in a VM</span></span>

<span data-ttu-id="f94a3-248">**데이터베이스를 복제합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-248">**Replicate the database.**</span></span> <span data-ttu-id="f94a3-249">SQL Server Always On 가용성 그룹을 사용하여 데이터베이스를 복제합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-249">Use SQL Server Always On Availability Groups to replicate the database.</span></span> <span data-ttu-id="f94a3-250">SQL Server 인스턴스 하나가 실패하는 경우 고가용성을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-250">Provides high availability if one SQL Server instance fails.</span></span> <span data-ttu-id="f94a3-251">자세한 내용은 [N 계층 응용 프로그램에 대해 Windows VM 실행](../reference-architectures/virtual-machines-windows/n-tier.md) 참조</span><span class="sxs-lookup"><span data-stu-id="f94a3-251">For more information, see [Run Windows VMs for an N-tier application](../reference-architectures/virtual-machines-windows/n-tier.md)</span></span>

<span data-ttu-id="f94a3-252">**데이터베이스를 백업합니다**.</span><span class="sxs-lookup"><span data-stu-id="f94a3-252">**Back up the database**.</span></span> <span data-ttu-id="f94a3-253">이미 [Azure Backup](https://azure.microsoft.com/documentation/services/backup/)을 사용하여 VM을 백업하는 경우 [DPM을 사용하는 SQL Server용 Azure Backup 워크로드](/azure/backup/backup-azure-backup-sql/)의 사용을 고려합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-253">If you are already using [Azure Backup](https://azure.microsoft.com/documentation/services/backup/) to back up your VMs, consider using [Azure Backup for SQL Server workloads using DPM](/azure/backup/backup-azure-backup-sql/).</span></span> <span data-ttu-id="f94a3-254">이 방법에서는 조직에 대한 백업 관리자 역할 하나와 VM 및 SQL Server에 대한 통합 복구 절차가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-254">With this approach, there is one backup administrator role for the organization and a unified recovery procedure for VMs and SQL Server.</span></span> <span data-ttu-id="f94a3-255">그렇지 않으면 [Microsoft Azure에 대한 SQL Server 관리 백업](https://msdn.microsoft.com/library/dn449496.aspx)을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-255">Otherwise, use [SQL Server Managed Backup to Microsoft Azure](https://msdn.microsoft.com/library/dn449496.aspx).</span></span>

## <a name="traffic-manager"></a><span data-ttu-id="f94a3-256">Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="f94a3-256">Traffic Manager</span></span>

<span data-ttu-id="f94a3-257">**수동 장애 복구를 수행합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-257">**Perform manual failback.**</span></span> <span data-ttu-id="f94a3-258">Traffic Manager 장애 조치 후 자동으로 장애 복구하는 대신 수동 장애 복구를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-258">After a Traffic Manager failover, perform manual failback, rather than automatically failing back.</span></span> <span data-ttu-id="f94a3-259">장애 복구 전에 모든 응용 프로그램 하위 시스템이 정상 상태인지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-259">Before failing back, verify that all application subsystems are healthy.</span></span>  <span data-ttu-id="f94a3-260">그렇지 않으면 응용 프로그램이 데이터 센터 간에 앞뒤로 뒤집어지는 상황이 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-260">Otherwise, you can create a situation where the application flips back and forth between data centers.</span></span> <span data-ttu-id="f94a3-261">자세한 내용은 [고가용성을 위해 여러 지역에서 VM 실행](../reference-architectures/virtual-machines-windows/multi-region-application.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-261">For more information, see [Run VMs in multiple regions for high availability](../reference-architectures/virtual-machines-windows/multi-region-application.md).</span></span>

<span data-ttu-id="f94a3-262">**상태 프로브 끝점을 만듭니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-262">**Create a health probe endpoint.**</span></span> <span data-ttu-id="f94a3-263">응용 프로그램의 전반적인 상태에 관하여 보고하는 사용자 지정 끝점을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-263">Create a custom endpoint that reports on the overall health of the application.</span></span> <span data-ttu-id="f94a3-264">이렇게 하면 단지 프런트 엔드뿐만 아니라 중요 경로가 고장인 경우 Traffic Manager가 장애 조치할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-264">This enables Traffic Manager to fail over if any critical path fails, not just the front end.</span></span> <span data-ttu-id="f94a3-265">끝점은 중요 의존성이 비정상 상태이거나 도달할 수 없는 경우 HTTP 오류 코드를 반환해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-265">The endpoint should return an HTTP error code if any critical dependency is unhealthy or unreachable.</span></span> <span data-ttu-id="f94a3-266">그러나 중요하지 않은 서비스에 대해서는 오류를 보고하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-266">Don't report errors for non-critical services, however.</span></span> <span data-ttu-id="f94a3-267">그렇지 않으면 상태 프로브가 필요하지 않을 때 장애 조치를 트리거하여 가양성이 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-267">Otherwise, the health probe might trigger failover when it's not needed, creating false positives.</span></span> <span data-ttu-id="f94a3-268">자세한 내용은 [Traffic Manager 끝점 모니터링 및 장애 조치](/azure/traffic-manager/traffic-manager-monitoring/)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-268">For more information, see [Traffic Manager endpoint monitoring and failover](/azure/traffic-manager/traffic-manager-monitoring/).</span></span>

## <a name="virtual-machines"></a><span data-ttu-id="f94a3-269">Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="f94a3-269">Virtual Machines</span></span>

<span data-ttu-id="f94a3-270">**단일 VM에서 프로덕션 워크로드를 실행하지 않습니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-270">**Avoid running a production workload on a single VM.**</span></span> <span data-ttu-id="f94a3-271">단일 VM 배포는 계획되거나 계획되지 않은 유지 관리에 탄력적으로 대처할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-271">A single VM deployment is not resilient to planned or unplanned maintenance.</span></span> <span data-ttu-id="f94a3-272">그 대신에 부하 분산 장치를 전면에 배치한 상태에서 여러 VM을 가용성 집합 또는 [VM 확장 집합](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/)에 배치합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-272">Instead, put multiple VMs in an availability set or [VM scale set](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/), with a load balancer in front.</span></span>

<span data-ttu-id="f94a3-273">**VM을 프로비전할 때 가용성 집합을 지정합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-273">**Specify an availability set when you provision the VM.**</span></span> <span data-ttu-id="f94a3-274">현재 VM이 프로비전된 후 VM을 가용성 집합에 추가하는 방법은 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-274">Currently, there is no way to add a VM to an availability set after the VM is provisioned.</span></span> <span data-ttu-id="f94a3-275">기존 가용성 집합에 새 VM을 추가하는 경우 VM에 대한 NIC를 만들고 부하 분산 장치의 백 엔드 주소 풀에 NIC를 추가해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-275">When you add a new VM to an existing availability set, make sure to create a NIC for the VM, and add the NIC to the back-end address pool on the load balancer.</span></span> <span data-ttu-id="f94a3-276">그렇지 않으면 부하 분산 장치가 네트워크 트래픽을 해당 VM에 경로 설정하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-276">Otherwise, the load balancer won't route network traffic to that VM.</span></span>

<span data-ttu-id="f94a3-277">**각 응용 프로그램 계층을 별도의 가용성 집합에 배치합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-277">**Put each application tier into a separate Availability Set.**</span></span> <span data-ttu-id="f94a3-278">N 계층 응용 프로그램에서 서로 다른 계층의 VM을 동일한 가용성 집합에 배치하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-278">In an N-tier application, don't put VMs from different tiers into the same availability set.</span></span> <span data-ttu-id="f94a3-279">가용성 집합의 VM은 장애 도메인(FD) 및 업데이트 도메인(UD)에 걸쳐 배치됩니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-279">VMs in an availability set are placed across fault domains (FDs) and update domains (UD).</span></span> <span data-ttu-id="f94a3-280">그러나 FD와 UD의 중복성 이점을 활용하려면 가용성 집합의 모든 VM이 동일한 클라이언트 요청을 처리할 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-280">However, to get the redundancy benefit of FDs and UDs, every VM in the availability set must be able to handle the same client requests.</span></span>

<span data-ttu-id="f94a3-281">**성능 요구 사항을 기반으로 올바른 VM 크기를 선택합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-281">**Choose the right VM size based on performance requirements.**</span></span> <span data-ttu-id="f94a3-282">기존 워크로드를 Azure로 이동할 때 온-프레미스 서버와 가장 근접하게 일치하는 VM 크기부터 사용하기 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-282">When moving an existing workload to Azure, start with the VM size that's the closest match to your on-premises servers.</span></span> <span data-ttu-id="f94a3-283">그런 다음 CPU, 메모리 및 디스크 IOPS에 따라 실제 워크로드의 성능을 측정하고 필요에 따라 크기를 조정합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-283">Then measure the performance of your actual workload with respect to CPU, memory, and disk IOPS, and adjust the size if needed.</span></span> <span data-ttu-id="f94a3-284">이렇게 하면 해당 응용 프로그램이 클라우드 환경에서 예상한 대로 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-284">This helps to ensure the application behaves as expected in a cloud environment.</span></span> <span data-ttu-id="f94a3-285">또한 여러 NIC가 필요한 경우 각 크기에 대한 NIC 제한을 알아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-285">Also, if you need multiple NICs, be aware of the NIC limit for each size.</span></span>

<span data-ttu-id="f94a3-286">**VHD에 Managed Disks를 사용합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-286">**Use Managed Disks for VHDs.**</span></span> <span data-ttu-id="f94a3-287">[Managed Disks][managed-disks]는 디스크들이 서로 충분히 격리되어 단일 실패 지점을 방지하므로 가용성 집합의 VM에 대해 더 나은 신뢰성을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-287">[Managed Disks][managed-disks] provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure.</span></span> <span data-ttu-id="f94a3-288">또한 Managed Disks는 저장소 계정에서 만든 VHD의 IOPS 제한이 적용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-288">Also, Managed Disks aren't subject to the IOPS limits of VHDs created in a storage account.</span></span> <span data-ttu-id="f94a3-289">자세한 내용은 [Azure에서 Windows 가상 머신의 가용성 관리][vm-manage-availability]를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-289">For more information, see [Manage the availability of Windows virtual machines in Azure][vm-manage-availability].</span></span>

<span data-ttu-id="f94a3-290">**응용 프로그램을 OS 디스크가 아닌 데이터 디스크에 설치합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-290">**Install applications on a data disk, not the OS disk.**</span></span> <span data-ttu-id="f94a3-291">이렇게 하지 않으면 디스크 크기 제한에 도달할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-291">Otherwise, you may reach the disk size limit.</span></span>

<span data-ttu-id="f94a3-292">**Azure Backup을 사용하여 VM을 백업합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-292">**Use Azure Backup to back up VMs.**</span></span> <span data-ttu-id="f94a3-293">백업은 실수로 인한 데이터 손실을 방지합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-293">Backups protect against accidental data loss.</span></span> <span data-ttu-id="f94a3-294">자세한 내용은 [복구 서비스 자격 증명 모음으로 Azure VM 보호](/azure/backup/backup-azure-vms-first-look-arm/)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-294">For more information, see [Protect Azure VMs with a recovery services vault](/azure/backup/backup-azure-vms-first-look-arm/).</span></span>

<span data-ttu-id="f94a3-295">기본 상태 메트릭, 인프라 로그 및 [부팅 진단][boot-diagnostics]을 포함하여 **진단 로그를 사용합니다**.</span><span class="sxs-lookup"><span data-stu-id="f94a3-295">**Enable diagnostic logs**, including basic health metrics, infrastructure logs, and [boot diagnostics][boot-diagnostics].</span></span> <span data-ttu-id="f94a3-296">부팅 진단은 VM이 부팅할 수 없는 상태로 전환되는 경우 부팅 오류를 진단하는 데 도움이 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-296">Boot diagnostics can help you diagnose a boot failure if your VM gets into a non-bootable state.</span></span> <span data-ttu-id="f94a3-297">자세한 내용은 [Azure 진단 로그][diagnostics-logs]를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-297">For more information, see [Overview of Azure Diagnostic Logs][diagnostics-logs].</span></span>

<span data-ttu-id="f94a3-298">**AzureLogCollector 확장을 사용합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-298">**Use the AzureLogCollector extension.**</span></span> <span data-ttu-id="f94a3-299">(Windows VM만 해당) 이 확장은 운영자가 원격으로 VM에 로그인하지 않고 Azure 플랫폼 로그를 집계하고 Azure 저장소에 업로드합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-299">(Windows VMs only.) This extension aggregates Azure platform logs and uploads them to Azure storage, without the operator remotely logging into the VM.</span></span> <span data-ttu-id="f94a3-300">자세한 내용은 [AzureLogCollector 확장](/azure/virtual-machines/virtual-machines-windows-log-collector-extension/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-300">For more information, see [AzureLogCollector Extension](/azure/virtual-machines/virtual-machines-windows-log-collector-extension/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

## <a name="virtual-network"></a><span data-ttu-id="f94a3-301">Virtual Network</span><span class="sxs-lookup"><span data-stu-id="f94a3-301">Virtual Network</span></span>

<span data-ttu-id="f94a3-302">**공용 IP 주소를 허용하거나 차단하려면 NSG를 서브넷에 추가합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-302">**To whitelist or block public IP addresses, add an NSG to the subnet.**</span></span> <span data-ttu-id="f94a3-303">악의적인 사용자의 액세스를 차단하거나 응용 프로그램에 액세스할 권한을 가진 사용자의 액세스만 허용합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-303">Block access from malicious users, or allow access only from users who have privilege to access the application.</span></span>  

<span data-ttu-id="f94a3-304">**사용자 지정 상태 프로브를 만듭니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-304">**Create a custom health probe.**</span></span> <span data-ttu-id="f94a3-305">부하 분산 장치 상태 프로브는 HTTP 또는 TCP를 테스트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-305">Load Balancer Health Probes can test either HTTP or TCP.</span></span> <span data-ttu-id="f94a3-306">VM에서 HTTP 서버를 실행하는 경우 HTTP 프로브는 TCP 프로브보다 더 나은 상태 표시기입니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-306">If a VM runs an HTTP server, the HTTP probe is a better indicator of health status than a TCP probe.</span></span> <span data-ttu-id="f94a3-307">HTTP 프로브의 경우 모든 중요 의존성을 포함하여 응용 프로그램의 전반적인 상태를 보고하는 사용자 지정 끝점을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-307">For an HTTP probe, use a custom endpoint that reports the overall health of the application, including all critical dependencies.</span></span> <span data-ttu-id="f94a3-308">자세한 내용은 [Azure 부하 분산 장치 개요](/azure/load-balancer/load-balancer-overview/)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-308">For more information, see [Azure Load Balancer overview](/azure/load-balancer/load-balancer-overview/).</span></span>

<span data-ttu-id="f94a3-309">**상태 프로브를 차단하지 않습니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-309">**Don't block the health probe.**</span></span> <span data-ttu-id="f94a3-310">부하 분산 장치 상태 프로브는 알려진 IP 주소 168.63.129.16에서 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-310">The Load Balancer Health probe is sent from a known IP address, 168.63.129.16.</span></span> <span data-ttu-id="f94a3-311">방화벽 정책 또는 NSG(네트워크 보안 그룹)에서 IP에 대한 트래픽을 차단하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-311">Don't block traffic to or from this IP in any firewall policies or network security group (NSG) rules.</span></span> <span data-ttu-id="f94a3-312">상태 프로브를 차단하면 부하 분산 장치가 VM을 윤번에서 제거할 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-312">Blocking the health probe would cause the load balancer to remove the VM from rotation.</span></span>

<span data-ttu-id="f94a3-313">**부하 분산 장치 로깅을 사용하도록 설정합니다.**</span><span class="sxs-lookup"><span data-stu-id="f94a3-313">**Enable Load Balancer logging.**</span></span> <span data-ttu-id="f94a3-314">로그는 백 엔드의 VM이 실패한 프로브 응답으로 인해 네트워크 트래픽을 수신하지 못하는 횟수를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="f94a3-314">The logs show how many VMs on the back-end are not receiving network traffic due to failed probe responses.</span></span> <span data-ttu-id="f94a3-315">자세한 내용은 [Azure Load Balancer에 대한 로그 분석](/azure/load-balancer/load-balancer-monitor-log/)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f94a3-315">For more information, see [Log analytics for Azure Load Balancer](/azure/load-balancer/load-balancer-monitor-log/).</span></span>

<!-- links -->
[boot-diagnostics]: https://azure.microsoft.com/blog/boot-diagnostics-for-virtual-machines-v2/
[diagnostics-logs]: /azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs/
[managed-disks]: /azure/storage/storage-managed-disks-overview
[search-optimization]: /azure/search/search-performance-optimization/
[sql-backup]: /azure/sql-database/sql-database-automated-backups/
[sql-restore]: /azure/sql-database/sql-database-recovery-using-backups/
[vm-manage-availability]: /azure/virtual-machines/windows/manage-availability#use-managed-disks-for-vms-in-an-availability-set
